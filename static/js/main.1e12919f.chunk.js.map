{"version":3,"sources":["AppHeader.js","MobileFilterCard.js","OrganisationFilterCard.js","RouteFilterCard.js","Filters.js","MobileCard.js","Mobiles.js","MobileAvatar.js","MobileMap.js","helpers/stops.js","Stops.js","helpers/mobiles.js","helpers/organisations.js","helpers/routes.js","App.js","serviceWorker.js","index.js"],"names":["AppHeader","_this","this","_this$props","props","classes","drawer_open","react_default","a","createElement","AppBar","position","color","elevation","className","clsx","appBar","Object","defineProperty","appBarShift","Toolbar","Typography","variant","noWrap","grow","Button","page","onClick","setPage","Dashboard_default","leftIcon","LocationOn_default","Map_default","Component","withStyles","theme","zIndex","drawer","backgroundColor","flexGrow","hide","display","marginRight","spacing","withTheme","MobileFilterCard","state","menu_anchor","openMenu","element","setState","closeMenu","chooseMobile","mobile_id","setMobileFilter","_this2","mobiles","mobile_lookup","mobile_filter","clearMobileFilter","organisation_lookup","organisation_filter","bull","bullet","Card","card","length","Fab","size","aria-label","fab","event","currentTarget","Add_default","Clear_default","CardContent","title","gutterBottom","name","component","Menu","id","anchorEl","keepMounted","open","Boolean","onClose","filter","mob","indexOf","organisation_id","map","MenuItem","key","Divider","margin","transform","minWidth","border","fontSize","fontWeight","top","right","OrganisationFilterCard","chooseOrganisation","setOrganisationFilter","displayStopLink","organisations","clearOrganisationFilter","Fragment","CardActions","Tooltip","button","viewStopsByOrganisation","verticalDivider","IconButton","PictureAsPdf_default","org","width","height","RouteFilterCard","chooseRoute","route_id","setRouteFilter","routes","route_lookup","route_filter","clearRouteFilter","route","Filters","Grid","grid","container","item","xs","sm","md","lg","xl","src_OrganisationFilterCard","src_MobileFilterCard","src_RouteFilterCard","marginBottom","MobileCard","mobile","organisation","location","number_routes","number_stops","Breadcrumbs","separator","previous_stop_id","Chip","label","previous_stop_name","current_stop_id","geox","next_stop_id","current_stop_name","moment","next_stop_arrival","format","next_stop_name","viewStopsByMobile","Mobiles","mobile_location_lookup","root","src_Filters","ListSubheader","disableSticky","idx","replace","src_MobileCard","MobileAvatar","DirectionsBus_default","boxShadow","Map","ReactMapboxGl","minZoom","maxZoom","scrollZoom","interactive","dragRotate","attributionControl","MobileMap","zoom","pitch","bearing","fit_bounds","mobile_locations","MobileMap_Map","style","center","fitBounds","containerStyle","bottom","left","l","lib_esm","coordinates","geoy","anchor","src_MobileAvatar","tileJsonSource","type","tiles","sourceId","sourceLayer","layout","paint","circle-radius","base","stops","circle-color","circle-stroke-width","circle-stroke-color","circle-opacity","text-ignore-placement","text-field","text-font","text-line-height","text-size","text-offset","text-halo-color","text-halo-width","text-halo-blur","text-color","config","require","Stops","tableRef","React","createRef","current","onQueryChange","getStopCalendar","rowData","getStopPdf","orgText","keys","forEach","mobileText","routeText","maxWidth","dist_default","components","Container","Paper","assign","table","icons","Filter","FilterList","FirstPage","LastPage","NextPage","ChevronRight","PreviousPage","ChevronLeft","options","search","loadingType","actionsColumnIndex","filtering","columns","field","render","arrival","departure","actions","icon","Event_default","iconProps","tooltip","data","query","Promise","resolve","reject","organisation_filters","mobile_filters","route_filters","callback","url","api","pageSize","orderBy","orderDirection","join","axios","get","then","response","total","parseInt","headers","catch","err","stopsHelper","stopData","totalCount","formControl","createMuiTheme","palette","primary","blue","secondary","deepOrange","error","red","overrides","MuiButton","text","textTransform","App","location_timer","getOrganisations","getMobiles","getRoutes","getMobileLocations","locations","componentDidMount","setInterval","viewStopsByRoute","MuiThemeProvider","CssBaseline","src_AppHeader","content","toolbar","src_Mobiles","src_Stops","src_MobileMap","objectSpread","alignItems","justifyContent","padding","mixins","window","hostname","match","ReactDOM","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1e12919f.chunk.js","sourcesContent":["// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\n\r\n// Material UI\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\n// Material Icons\r\nimport DashboardIcon from '@material-ui/icons/Dashboard';\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\nimport MapIcon from '@material-ui/icons/Map';\r\n\r\n// Material UI Styles\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = theme => ({\r\n\tappBar: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\tbackgroundColor: 'rgba(255, 255, 255, 0.5)'\r\n\t},\r\n\tgrow: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\thide: {\r\n\t\tdisplay: 'none'\r\n\t},\r\n\tleftIcon: {\r\n\t\tmarginRight: theme.spacing(1)\r\n\t}\r\n});\r\n\r\nclass AppHeader extends Component {\r\n\r\n\trender() {\r\n\t\tconst { classes, drawer_open } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<AppBar\r\n\t\t\t\tposition=\"fixed\"\r\n\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\televation={0}\r\n\t\t\t\tclassName={clsx(classes.appBar, {\r\n\t\t\t\t\t[classes.appBarShift]: drawer_open\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t<Toolbar>\r\n\t\t\t\t\t<Typography variant=\"h6\" color=\"secondary\" noWrap>Mobile Libraries</Typography>\r\n\t\t\t\t\t<div className={classes.grow} />\r\n\t\t\t\t\t<Button color=\"primary\" variant={this.props.page === 'mobiles' ? 'text' : 'text'}\r\n\t\t\t\t\t\tonClick={() => this.props.setPage('mobiles')}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<DashboardIcon className={classes.leftIcon} />Mobile dashboard\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"primary\" variant={this.props.page === 'stops' ? 'text' : 'text'}\r\n\t\t\t\t\t\tonClick={() => this.props.setPage('stops')}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<LocationOnIcon className={classes.leftIcon} />Find a stop\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"primary\" variant={this.props.page === 'map' ? 'text' : 'text'}\r\n\t\t\t\t\t\tonClick={() => this.props.setPage('map')}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<MapIcon className={classes.leftIcon} />Map\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</AppBar>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAppHeader.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(AppHeader);","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Material UI\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\n// Material UI Styles\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\n// Icons\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\n\r\nconst styles = theme => ({\r\n\tbullet: {\r\n\t\tdisplay: 'inline-block',\r\n\t\tmargin: '0 2px',\r\n\t\ttransform: 'scale(0.8)'\r\n\t},\r\n\tcard: {\r\n\t\tposition: 'relative',\r\n\t\tminWidth: 275,\r\n\t\tborder: '1px solid rgba(0, 0, 0, 0.12)'\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: 12,\r\n\t\tfontWeight: 500\r\n\t},\r\n\tfab: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: theme.spacing(2),\r\n\t\tright: theme.spacing(2)\r\n\t}\r\n});\r\n\r\nclass MobileFilterCard extends Component {\r\n\tstate = {\r\n\t\tmenu_anchor: null\r\n\t};\r\n\r\n\topenMenu = (element) => this.setState({ menu_anchor: element });\r\n\r\n\tcloseMenu = () => this.setState({ menu_anchor: null });\r\n\r\n\tchooseMobile = (mobile_id) => {\r\n\t\tthis.props.setMobileFilter(mobile_id);\r\n\t\tthis.closeMenu();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { classes, mobiles, mobile_lookup, mobile_filter, clearMobileFilter, organisation_lookup, organisation_filter } = this.props;\r\n\t\tconst bull = <span className={classes.bullet}>•</span>;\r\n\t\treturn (\r\n\t\t\t<Card className={classes.card} elevation={0}>\r\n\t\t\t\t{organisation_filter.length > 0 && mobile_filter.length === 0 ?\r\n\t\t\t\t\t<Fab color=\"primary\" size=\"small\" aria-label=\"Add\" className={classes.fab} onClick={(event) => this.openMenu(event.currentTarget)}>\r\n\t\t\t\t\t\t<AddIcon />\r\n\t\t\t\t\t</Fab> : null}\r\n\t\t\t\t{mobile_filter.length > 0 ?\r\n\t\t\t\t\t<Fab color=\"secondary\" size=\"small\" aria-label=\"Clear\" className={classes.fab} onClick={() => clearMobileFilter()}>\r\n\t\t\t\t\t\t<ClearIcon />\r\n\t\t\t\t\t</Fab> : null}\r\n\t\t\t\t<CardContent>\r\n\t\t\t\t\t<Typography className={classes.title} color=\"textSecondary\" gutterBottom>\r\n\t\t\t\t\t\t{organisation_filter.length > 0 ? organisation_lookup[organisation_filter[0]].name : 'All services'}\r\n\t\t\t\t\t\t{bull}\r\n\t\t\t\t\t\t{mobiles.length + ' mobile libraries'}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t{mobile_filter && mobile_filter.length > 0 ?\r\n\t\t\t\t\t\t<Typography variant=\"h6\" component=\"h2\">\r\n\t\t\t\t\t\t\t{mobile_lookup[mobile_filter[0]].name}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t: null}\r\n\t\t\t\t</CardContent>\r\n\t\t\t\t<CardContent></CardContent>\r\n\t\t\t\t<Menu\r\n\t\t\t\t\tid=\"menu-mobile-library\"\r\n\t\t\t\t\tanchorEl={this.state.menu_anchor}\r\n\t\t\t\t\tkeepMounted\r\n\t\t\t\t\topen={Boolean(this.state.menu_anchor)}\r\n\t\t\t\t\tonClose={() => this.closeMenu()}\r\n\t\t\t\t>\r\n\t\t\t\t\t{mobiles\r\n\t\t\t\t\t\t.filter(mob => {\r\n\t\t\t\t\t\t\tlet display = true;\r\n\t\t\t\t\t\t\tif (organisation_filter.length > 0 &&\r\n\t\t\t\t\t\t\t\torganisation_filter.indexOf(mob.organisation_id) === -1) {\r\n\t\t\t\t\t\t\t\tdisplay = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn display;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.map(mob => {\r\n\t\t\t\t\t\t\treturn <MenuItem key={'mnu_itm_mob_' + mob.id} onClick={() => this.chooseMobile(mob.id)}>{mob.name}</MenuItem>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t</Menu>\r\n\t\t\t\t{mobile_filter.length > 0 ?\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Divider variant=\"middle\" />\r\n\t\t\t\t\t</div> : null}\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMobileFilterCard.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(MobileFilterCard);","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Material UI\r\nimport Button from '@material-ui/core/Button';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\n// Material UI Styles\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\n// MUI Icons\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\r\n\r\nconst styles = theme => ({\r\n\tcard: {\r\n\t\tposition: 'relative',\r\n\t\tminWidth: 275,\r\n\t\tborder: '1px solid rgba(0, 0, 0, 0.12)'\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: 12,\r\n\t\tfontWeight: 500\r\n\t},\r\n\tfab: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: theme.spacing(2),\r\n\t\tright: theme.spacing(2)\r\n\t},\r\n\tverticalDivider: {\r\n\t\twidth: 1,\r\n\t\theight: 28,\r\n\t\tmargin: 8\r\n\t}\r\n});\r\n\r\nclass OrganisationFilterCard extends Component {\r\n\tstate = {\r\n\t\tmenu_anchor: null\r\n\t};\r\n\r\n\topenMenu = (element) => this.setState({ menu_anchor: element });\r\n\r\n\tcloseMenu = () => this.setState({ menu_anchor: null });\r\n\r\n\tchooseOrganisation = (organisation_id) => {\r\n\t\tthis.props.setOrganisationFilter(organisation_id);\r\n\t\tthis.closeMenu();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { classes, displayStopLink, organisations, organisation_lookup, organisation_filter, clearOrganisationFilter } = this.props;\r\n\t\treturn (\r\n\t\t\t<Card className={classes.card} elevation={0}>\r\n\t\t\t\t{organisation_filter.length === 0 ?\r\n\t\t\t\t\t<Fab color=\"primary\" size=\"small\" aria-label=\"Add\" className={classes.fab} onClick={(event) => this.openMenu(event.currentTarget)}>\r\n\t\t\t\t\t\t<AddIcon />\r\n\t\t\t\t\t</Fab> :\r\n\t\t\t\t\t<Fab color=\"secondary\" size=\"small\" aria-label=\"Clear\" className={classes.fab} onClick={() => clearOrganisationFilter()}>\r\n\t\t\t\t\t\t<ClearIcon />\r\n\t\t\t\t\t</Fab>}\r\n\t\t\t\t<CardContent>\r\n\t\t\t\t\t<Typography className={classes.title} color=\"textSecondary\" gutterBottom>{organisations.length + ' library services'}</Typography>\r\n\t\t\t\t\t{organisation_filter && organisation_filter.length > 0 ?\r\n\t\t\t\t\t\t<Typography variant=\"h6\" component=\"h2\">{organisation_lookup[organisation_filter[0]].name}</Typography>\r\n\t\t\t\t\t\t: null}\r\n\t\t\t\t</CardContent>\r\n\t\t\t\t{organisation_filter && organisation_filter.length > 0 ?\r\n\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t<Divider variant=\"middle\" />\r\n\t\t\t\t\t\t<CardActions>\r\n\t\t\t\t\t\t\t{displayStopLink ? <Tooltip title=\"Library service stops\">\r\n\t\t\t\t\t\t\t\t<Button size=\"small\" color=\"primary\" className={classes.button} onClick={() => this.props.viewStopsByOrganisation(organisation_lookup[organisation_filter[0]].id)}>\r\n\t\t\t\t\t\t\t\t\t<LocationOnIcon className={classes.leftIcon} />Stops\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Tooltip> : null}\r\n\t\t\t\t\t\t\t<Divider className={classes.verticalDivider} />\r\n\t\t\t\t\t\t\t<Tooltip title=\"Download PDF timetable for library service\">\r\n\t\t\t\t\t\t\t\t<IconButton>\r\n\t\t\t\t\t\t\t\t\t<PictureAsPdfIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t</CardActions>\r\n\t\t\t\t\t</React.Fragment> : <CardContent></CardContent>}\r\n\t\t\t\t<Menu\r\n\t\t\t\t\tid=\"menu-library-service\"\r\n\t\t\t\t\tanchorEl={this.state.menu_anchor}\r\n\t\t\t\t\tkeepMounted\r\n\t\t\t\t\topen={Boolean(this.state.menu_anchor)}\r\n\t\t\t\t\tonClose={() => this.closeMenu()}\r\n\t\t\t\t>\r\n\t\t\t\t\t{organisations.map(org => {\r\n\t\t\t\t\t\treturn <MenuItem key={'mnu_itm_org_' + org.id} onClick={() => this.chooseOrganisation(org.id)}>{org.name}</MenuItem>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Menu>\r\n\t\t\t</Card >\r\n\t\t);\r\n\t}\r\n}\r\n\r\nOrganisationFilterCard.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(OrganisationFilterCard);","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Material UI\r\nimport Card from '@material-ui/core/Card';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\n// Material UI Styles\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\n// Icons\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\n\r\nconst styles = theme => ({\r\n\tbullet: {\r\n\t\tdisplay: 'inline-block',\r\n\t\tmargin: '0 2px',\r\n\t\ttransform: 'scale(0.8)'\r\n\t},\r\n\tcard: {\r\n\t\tposition: 'relative',\r\n\t\tminWidth: 275,\r\n\t\tborder: '1px solid rgba(0, 0, 0, 0.12)'\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: 12,\r\n\t\tfontWeight: 500\r\n\t},\r\n\tfab: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: theme.spacing(2),\r\n\t\tright: theme.spacing(2)\r\n\t}\r\n});\r\n\r\nclass RouteFilterCard extends Component {\r\n\tstate = {\r\n\t\tmenu_anchor: null\r\n\t};\r\n\r\n\topenMenu = (element) => {\r\n\t\tthis.setState({ menu_anchor: element });\r\n\t}\r\n\r\n\tcloseMenu = () => {\r\n\t\tthis.setState({ menu_anchor: null });\r\n\t}\r\n\r\n\tchooseRoute = (route_id) => {\r\n\t\tthis.props.setRouteFilter(route_id);\r\n\t\tthis.closeMenu();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { classes, routes, route_lookup, route_filter, clearRouteFilter, organisation_filter, organisation_lookup, mobile_filter, mobile_lookup } = this.props;\r\n\t\tconst bull = <span className={classes.bullet}>•</span>;\r\n\t\treturn (\r\n\t\t\t<Card className={classes.card} elevation={0}>\r\n\t\t\t\t{route_filter.length === 0 ?\r\n\t\t\t\t\t<Fab color=\"primary\" size=\"small\" aria-label=\"Add\" className={classes.fab} onClick={(event) => this.openMenu(event.currentTarget)}>\r\n\t\t\t\t\t\t<AddIcon />\r\n\t\t\t\t\t</Fab> :\r\n\t\t\t\t\t<Fab color=\"secondary\" size=\"small\" aria-label=\"Clear\" className={classes.fab} onClick={() => clearRouteFilter()}>\r\n\t\t\t\t\t\t<ClearIcon />\r\n\t\t\t\t\t</Fab>}\r\n\t\t\t\t<CardContent>\r\n\t\t\t\t\t<Typography className={classes.title} color=\"textSecondary\" gutterBottom>\r\n\t\t\t\t\t\t{organisation_filter.length > 0 ? organisation_lookup[organisation_filter[0]].name : 'All services'}\r\n\t\t\t\t\t\t{bull}\r\n\t\t\t\t\t\t{mobile_filter.length > 0 ? mobile_lookup[mobile_filter[0]].name : 'All mobiles'}\r\n\t\t\t\t\t\t{bull}\r\n\t\t\t\t\t\t{routes.length + ' routes'}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t{route_filter && route_filter.length > 0 ?\r\n\t\t\t\t\t\t<Typography variant=\"h6\" component=\"h2\">{route_lookup[route_filter[0]].name}</Typography>\r\n\t\t\t\t\t\t: null}\r\n\t\t\t\t</CardContent>\r\n\t\t\t\t<CardContent>\r\n\t\t\t\t\t<Menu\r\n\t\t\t\t\t\tid=\"menu-route\"\r\n\t\t\t\t\t\tanchorEl={this.state.menu_anchor}\r\n\t\t\t\t\t\tkeepMounted\r\n\t\t\t\t\t\topen={Boolean(this.state.menu_anchor)}\r\n\t\t\t\t\t\tonClose={() => this.closeMenu()}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{routes.map(route => {\r\n\t\t\t\t\t\t\treturn <MenuItem key={'mnu_itm_route_' + route.id} onClick={() => this.chooseRoute(route.id)}>{route.name}</MenuItem>\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</Menu>\r\n\t\t\t\t</CardContent>\r\n\t\t\t\t{route_filter.length > 0 ?\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Divider variant=\"middle\" />\r\n\t\t\t\t\t</div> : null}\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nRouteFilterCard.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(RouteFilterCard);","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Material UI\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\n// Material UI Styles\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport MobileFilterCard from './MobileFilterCard';\r\nimport OrganisationFilterCard from './OrganisationFilterCard';\r\nimport RouteFilterCard from './RouteFilterCard';\r\n\r\nconst styles = (theme) => ({\r\n\tgrid: {\r\n\t\tmarginBottom: 10\r\n\t}\r\n});\r\n\r\nclass Filters extends Component {\r\n\r\n\tstate = {\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tclasses, displayStopLink,\r\n\t\t\torganisations, organisation_lookup, organisation_filter, setOrganisationFilter, \r\n\t\t\tclearOrganisationFilter, viewStopsByOrganisation,\r\n\t\t\tmobiles, mobile_lookup, mobile_filter, setMobileFilter, clearMobileFilter,\r\n\t\t\troutes, route_lookup, route_filter, setRouteFilter, clearRouteFilter\r\n\t\t} = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Grid className={classes.grid} container spacing={3}>\r\n\t\t\t\t<Grid item xs={12} sm={6} md={4} lg={3} xl={2}>\r\n\t\t\t\t\t<OrganisationFilterCard\r\n\t\t\t\t\t\tdisplayStopLink={displayStopLink}\r\n\t\t\t\t\t\torganisations={organisations}\r\n\t\t\t\t\t\torganisation_lookup={organisation_lookup}\r\n\t\t\t\t\t\torganisation_filter={organisation_filter}\r\n\t\t\t\t\t\tsetOrganisationFilter={setOrganisationFilter}\r\n\t\t\t\t\t\tclearOrganisationFilter={clearOrganisationFilter}\r\n\t\t\t\t\t\tviewStopsByOrganisation={viewStopsByOrganisation}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12} sm={6} md={4} lg={3} xl={2}>\r\n\t\t\t\t\t<MobileFilterCard\r\n\t\t\t\t\t\tdisplayStopLink={displayStopLink}\r\n\t\t\t\t\t\torganisation_filter={organisation_filter}\r\n\t\t\t\t\t\torganisation_lookup={organisation_lookup}\r\n\t\t\t\t\t\tmobiles={mobiles.filter(mob => {\r\n\t\t\t\t\t\t\tlet display = true;\r\n\t\t\t\t\t\t\tif (organisation_filter.length > 0 &&\r\n\t\t\t\t\t\t\t\torganisation_filter.indexOf(mob.organisation_id) === -1) {\r\n\t\t\t\t\t\t\t\tdisplay = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn display;\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\tmobile_lookup={mobile_lookup}\r\n\t\t\t\t\t\tmobile_filter={mobile_filter}\r\n\t\t\t\t\t\tsetMobileFilter={setMobileFilter}\r\n\t\t\t\t\t\tclearMobileFilter={clearMobileFilter}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12} sm={6} md={4} lg={3} xl={2}>\r\n\t\t\t\t\t{mobile_filter.length > 0 ?\r\n\t\t\t\t\t\t<RouteFilterCard\r\n\t\t\t\t\t\t\tdisplayStopLink={displayStopLink}\r\n\t\t\t\t\t\t\torganisation_filter={organisation_filter}\r\n\t\t\t\t\t\t\torganisation_lookup={organisation_lookup}\r\n\t\t\t\t\t\t\tmobile_lookup={mobile_lookup}\r\n\t\t\t\t\t\t\tmobile_filter={mobile_filter}\r\n\t\t\t\t\t\t\troutes={routes.filter(route => {\r\n\t\t\t\t\t\t\t\tlet display = true;\r\n\t\t\t\t\t\t\t\tif (mobile_filter.length > 0 &&\r\n\t\t\t\t\t\t\t\t\tmobile_filter.indexOf(route.mobile_id) === -1) {\r\n\t\t\t\t\t\t\t\t\tdisplay = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn display;\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\troute_lookup={route_lookup}\r\n\t\t\t\t\t\t\troute_filter={route_filter}\r\n\t\t\t\t\t\t\tsetRouteFilter={setRouteFilter}\r\n\t\t\t\t\t\t\tclearRouteFilter={clearRouteFilter}\r\n\t\t\t\t\t\t/> : null\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nFilters.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(Filters);","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Material UI\r\nimport Button from '@material-ui/core/Button';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\n// MUI Icons\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\r\n\r\n// Material UI Styles\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Breadcrumbs } from '@material-ui/core';\r\n\r\nimport moment from 'moment';\r\n\r\nconst styles = theme => ({\r\n\tcard: {\r\n\t\tminWidth: 275,\r\n\t\tborder: '1px solid rgba(0, 0, 0, 0.12)'\r\n\t},\r\n\tbullet: {\r\n\t\tdisplay: 'inline-block',\r\n\t\tmargin: '0 2px',\r\n\t\ttransform: 'scale(0.8)'\r\n\t},\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(2)\r\n\t},\r\n\tverticalDivider: {\r\n\t\twidth: 1,\r\n\t\theight: 28,\r\n\t\tmargin: 8\r\n\t},\r\n\tleftIcon: {\r\n\t\tmarginRight: theme.spacing(1),\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: 12,\r\n\t\tfontWeight: 500\r\n\t}\r\n});\r\n\r\nclass MobileCard extends Component {\r\n\tstate = {\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { classes, mobile, organisation, location } = this.props;\r\n\t\tconst bull = <span className={classes.bullet}>•</span>;\r\n\t\treturn (\r\n\r\n\t\t\t<Card className={classes.card} elevation={0}>\r\n\t\t\t\t<CardContent>\r\n\t\t\t\t\t<Typography className={classes.title} color=\"textSecondary\" gutterBottom>\r\n\t\t\t\t\t\t{organisation ? organisation.name : ''}\r\n\t\t\t\t\t\t{bull}\r\n\t\t\t\t\t\t{mobile.number_routes + ' route' + (mobile.number_routes > 1 ? 's' : '')}\r\n\t\t\t\t\t\t{bull}\r\n\t\t\t\t\t\t{mobile.number_stops + ' stop' + (mobile.number_stops > 1 ? 's' : '')}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<Typography variant=\"h6\" component=\"h2\">{mobile.name}</Typography>\r\n\t\t\t\t\t<Breadcrumbs separator=\"›\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlocation && location.previous_stop_id ?\r\n\t\t\t\t\t\t\t\t<Chip size=\"small\" label={location.previous_stop_name} />\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlocation && !location.current_stop_id && !location.previous_stop_id & !location.geox ?\r\n\t\t\t\t\t\t\t\t<Chip size=\"small\" color=\"primary\" label=\"Off Road\" />\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlocation && !location.current_stop_id && location.previous_stop_id && location.next_stop_id && location.geox ?\r\n\t\t\t\t\t\t\t\t<Chip size=\"small\" color=\"primary\" label=\"Travelling\" />\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlocation && location.current_stop_id ?\r\n\t\t\t\t\t\t\t\t<Chip size=\"small\" color=\"primary\" label={location.current_stop_name} />\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlocation && location.next_stop_id ?\r\n\t\t\t\t\t\t\t\t<Chip size=\"small\" label={moment(location.next_stop_arrival).format('HH:mma') + ' ' + location.next_stop_name} />\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Breadcrumbs>\r\n\t\t\t\t</CardContent>\r\n\t\t\t\t<Divider variant=\"middle\" />\r\n\t\t\t\t<CardActions>\r\n\t\t\t\t\t<Tooltip title=\"Mobile library stops\">\r\n\t\t\t\t\t\t<Button size=\"small\" color=\"primary\" className={classes.button} onClick={() => this.props.viewStopsByMobile(mobile.id)}>\r\n\t\t\t\t\t\t\t<LocationOnIcon className={classes.leftIcon} />Stops\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t<Divider className={classes.verticalDivider} />\r\n\t\t\t\t\t<Tooltip title=\"Download PDF timetable for mobile\">\r\n\t\t\t\t\t\t<IconButton>\r\n\t\t\t\t\t\t\t<PictureAsPdfIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</CardActions>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMobileCard.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(MobileCard);","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Material UI\r\nimport Grid from '@material-ui/core/Grid';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\n\r\n// Material UI Styles\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Filters from './Filters';\r\nimport MobileCard from './MobileCard';\r\n\r\nconst styles = () => ({\r\n\troot: {\r\n\t\tflexGrow: 1\r\n\t}\r\n});\r\n\r\nclass Mobiles extends Component {\r\n\tstate = {\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { classes, organisations, organisation_lookup, organisation_filter, setOrganisationFilter, clearOrganisationFilter, viewStopsByOrganisation,\r\n\t\t\tmobiles, mobile_lookup, mobile_location_lookup, mobile_filter, setMobileFilter, clearMobileFilter,\r\n\t\t\troutes, route_lookup, route_filter, setRouteFilter, clearRouteFilter } = this.props;\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<Filters\r\n\t\t\t\t\tdisplayStopLink={true}\r\n\t\t\t\t\torganisations={organisations}\r\n\t\t\t\t\torganisation_lookup={organisation_lookup}\r\n\t\t\t\t\torganisation_filter={organisation_filter}\r\n\t\t\t\t\tsetOrganisationFilter={setOrganisationFilter}\r\n\t\t\t\t\tclearOrganisationFilter={clearOrganisationFilter}\r\n\t\t\t\t\tviewStopsByOrganisation={viewStopsByOrganisation}\r\n\t\t\t\t\tmobiles={mobiles}\r\n\t\t\t\t\tmobile_lookup={mobile_lookup}\r\n\t\t\t\t\tmobile_filter={mobile_filter}\r\n\t\t\t\t\tsetMobileFilter={setMobileFilter}\r\n\t\t\t\t\tclearMobileFilter={clearMobileFilter}\r\n\t\t\t\t\troutes={routes}\r\n\t\t\t\t\troute_lookup={route_lookup}\r\n\t\t\t\t\troute_filter={route_filter}\r\n\t\t\t\t\tsetRouteFilter={setRouteFilter}\r\n\t\t\t\t\tclearRouteFilter={clearRouteFilter}\r\n\t\t\t\t/>\r\n\t\t\t\t<ListSubheader disableSticky={true}>Library dashboard</ListSubheader>\r\n\t\t\t\t<Grid container spacing={3}>\r\n\t\t\t\t\t{mobiles\r\n\t\t\t\t\t\t.filter(mob => {\r\n\t\t\t\t\t\t\tlet display = true;\r\n\t\t\t\t\t\t\tif (organisation_filter.length > 0 &&\r\n\t\t\t\t\t\t\t\torganisation_filter.indexOf(mob.organisation_id) === -1) {\r\n\t\t\t\t\t\t\t\tdisplay = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (mobile_filter.length > 0 &&\r\n\t\t\t\t\t\t\t\tmobile_filter.indexOf(mob.id) === -1) {\r\n\t\t\t\t\t\t\t\tdisplay = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn display;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.map((mobile, idx) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\t\t\tkey={'grd_' + mobile.name.replace(' ', '') + '_' + idx}\r\n\t\t\t\t\t\t\t\t\titem xs={12} sm={6} md={4} lg={3} xl={2}>\r\n\t\t\t\t\t\t\t\t\t<MobileCard\r\n\t\t\t\t\t\t\t\t\t\tmobile={mobile}\r\n\t\t\t\t\t\t\t\t\t\tlocation={mobile_location_lookup[mobile.id]}\r\n\t\t\t\t\t\t\t\t\t\torganisation={organisation_lookup[mobile.organisation_id]}\r\n\t\t\t\t\t\t\t\t\t\tviewStopsByMobile={this.props.viewStopsByMobile}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMobiles.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles)(Mobiles);","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Material UI\r\nimport Fab from '@material-ui/core/Fab';\r\n\r\n// MUI Icons\r\nimport DirectionBusIcon from '@material-ui/icons/DirectionsBus';\r\n\r\n// Material UI Styles\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = theme => ({\r\n\tfab: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tboxShadow: 'none'\r\n\t}\r\n});\r\n\r\nclass MobileAvatar extends Component {\r\n\tstate = {\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\treturn (\r\n\t\t\t<Fab size=\"small\" color=\"primary\" className={classes.fab}>\r\n\t\t\t\t<DirectionBusIcon />\r\n\t\t\t</Fab>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMobileAvatar.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(MobileAvatar);","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Mapbox GL\r\nimport ReactMapboxGl, { ZoomControl, Source, Layer, Marker } from \"react-mapbox-gl\";\r\n\r\nimport MobileAvatar from './MobileAvatar';\r\n\r\nconst Map = ReactMapboxGl({\r\n\tminZoom: 5,\r\n\tmaxZoom: 18,\r\n\tscrollZoom: true,\r\n\tinteractive: true,\r\n\tdragRotate: true,\r\n\tattributionControl: true\r\n});\r\n\r\nclass MobileMap extends Component {\r\n\r\n\trender() {\r\n\t\tconst { position, zoom, pitch, bearing, fit_bounds, mobile_locations, mobile_lookup } = this.props;\r\n\t\treturn (\r\n\t\t\t<Map\r\n\t\t\t\tstyle='style.json'  // eslint-disable-line react/style-prop-object\r\n\t\t\t\tcenter={position}\r\n\t\t\t\tzoom={zoom}\r\n\t\t\t\tmaxZoom={17}\r\n\t\t\t\tpitch={pitch}\r\n\t\t\t\tbearing={bearing}\r\n\t\t\t\tfitBounds={fit_bounds}\r\n\t\t\t\tcontainerStyle={{ top: 0, bottom: 0, right: 0, left: 0, height: '100vh', width: '100vw', position: 'absolute' }}\r\n\t\t\t>\r\n\t\t\t\t{ // The mobile library locations\r\n\t\t\t\t\tmobile_locations && mobile_locations.length > 0 ?\r\n\t\t\t\t\t\tmobile_locations.map(l => {\r\n\t\t\t\t\t\t\treturn <Marker\r\n\t\t\t\t\t\t\t\tcoordinates={[l.geox, l.geoy]}\r\n\t\t\t\t\t\t\t\tanchor=\"bottom\">\r\n\t\t\t\t\t\t\t\t<MobileAvatar\r\n\t\t\t\t\t\t\t\t\tmobile={mobile_lookup[l.mobile_id]}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Marker>\r\n\t\t\t\t\t\t}) : null\r\n\t\t\t\t}\r\n\t\t\t\t<Source\r\n\t\t\t\t\tid='src_stops'\r\n\t\t\t\t\ttileJsonSource={{\r\n\t\t\t\t\t\ttype: 'vector',\r\n\t\t\t\t\t\ttiles: [\r\n\t\t\t\t\t\t\t'https://api.mobilelibraries.org/api/stops/{z}/{x}/{y}.mvt',\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t}} />\r\n\t\t\t\t<Layer\r\n\t\t\t\t\tid='lyr_stops_circles'\r\n\t\t\t\t\ttype='circle'\r\n\t\t\t\t\tsourceId='src_stops'\r\n\t\t\t\t\tsourceLayer='stop'\r\n\t\t\t\t\tlayout={{}}\r\n\t\t\t\t\tpaint={{\r\n\t\t\t\t\t\t'circle-radius': {\r\n\t\t\t\t\t\t\t'base': 1.75,\r\n\t\t\t\t\t\t\t'stops': [[9, 5], [22, 180]]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t'circle-color': '#36A2EB',\r\n\t\t\t\t\t\t'circle-stroke-width': {\r\n\t\t\t\t\t\t\t'base': 1,\r\n\t\t\t\t\t\t\t'stops': [[9, 2], [22, 10]]\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t'circle-stroke-color': '#FFFFFF',\r\n\t\t\t\t\t\t'circle-opacity': 0.8\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<Layer\r\n\t\t\t\t\tid='lyr_stops_labels'\r\n\t\t\t\t\ttype='symbol'\r\n\t\t\t\t\tsourceId='src_stops'\r\n\t\t\t\t\tsourceLayer='stop'\r\n\t\t\t\t\tminZoom={12}\r\n\t\t\t\t\tlayout={{\r\n\t\t\t\t\t\t'text-ignore-placement': true,\r\n\t\t\t\t\t\t'text-field': ['to-string', ['get', 'name']],\r\n\t\t\t\t\t\t\"text-font\": [\r\n\t\t\t\t\t\t\t\"Source Sans Pro Regular\"\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\"text-line-height\": 1,\r\n\t\t\t\t\t\t\"text-size\": [\r\n\t\t\t\t\t\t\t\"interpolate\",\r\n\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\"linear\"\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\"zoom\"\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t10,\r\n\t\t\t\t\t\t\t8,\r\n\t\t\t\t\t\t\t15,\r\n\t\t\t\t\t\t\t10,\r\n\t\t\t\t\t\t\t22,\r\n\t\t\t\t\t\t\t25\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\"text-offset\": [0, 1.8],\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tpaint={{\r\n\t\t\t\t\t\t\"text-halo-color\": \"hsl(0, 0%, 100%)\",\r\n\t\t\t\t\t\t\"text-halo-width\": 1,\r\n\t\t\t\t\t\t\"text-halo-blur\": 1,\r\n\t\t\t\t\t\t\"text-color\": \"#6a6f73\"\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<ZoomControl position=\"bottom-right\" />\r\n\t\t\t</Map>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMobileMap.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default MobileMap;","// Axios for making requests\r\nimport axios from 'axios';\r\n\r\nconst config = require('./config.json');\r\n\r\nexport function getQueryStops(query, organisation_filters, mobile_filters, route_filters, callback) {\r\n\r\n\tlet url = config.api + '/api/stops?page=' + (query.page + 1) + '&limit=' + query.pageSize;\r\n\tif (query.orderBy && query.orderBy.field) url = url + '&sort=' + query.orderBy.field + '&direction=' + query.orderDirection;\r\n\r\n\tif (mobile_filters.length > 0) url = url + '&mobile_ids=' + mobile_filters.join('|');\r\n\tif (organisation_filters.length > 0) url = url + '&organisation_ids=' + organisation_filters.join('|');\r\n\tif (route_filters.length > 0) url = url + '&route_ids=' + route_filters.join('|');\r\n\r\n\taxios.get(url)\r\n\t\t.then(response => {\r\n\t\t\tif (response && response.data) {\r\n\t\t\t\tcallback({\r\n\t\t\t\t\tstops: response.data,\r\n\t\t\t\t\ttotal: parseInt(response.headers['x-total-count']),\r\n\t\t\t\t\tpage: parseInt(response.headers['x-page'])\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tcallback({ stops: [], total: 0, page: 1 });\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err => callback({ stops: [], total: 0, page: 1 }));\r\n}\r\n\r\nexport function getAllStops(callback) {\r\n\taxios.get(config.api + '/api/stops')\r\n\t\t.then(response => {\r\n\t\t\tif (response && response.data) {\r\n\t\t\t\tcallback(response.data);\r\n\t\t\t} else {\r\n\t\t\t\tcallback({});\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err => callback({}));\r\n}","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Material UI\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\n// Material Table\r\nimport MaterialTable from 'material-table';\r\n\r\n// Material UI Styles\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\n// MUI Icons\r\nimport Event from '@material-ui/icons/Event';\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRight from '@material-ui/icons/ChevronRight';\r\nimport FirstPage from '@material-ui/icons/FirstPage';\r\nimport FilterList from '@material-ui/icons/FilterList';\r\nimport LastPage from '@material-ui/icons/LastPage';\r\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\r\n\r\nimport Filters from './Filters';\r\n\r\nimport moment from 'moment';\r\n\r\nimport * as stopsHelper from './helpers/stops';\r\n\r\nconst styles = (theme) => ({\r\n\tformControl: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tminWidth: 200,\r\n\t},\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\tmaxWidth: '100%'\r\n\t},\r\n\ttable: {\r\n\t\tborder: '1px solid rgba(0, 0, 0, 0.12)'\r\n\t}\r\n});\r\n\r\nclass Stops extends Component {\r\n\r\n\tstate = {\r\n\t\ttitle: 'All stops'\r\n\t};\r\n\r\n\ttableRef = React.createRef();\r\n\r\n\tsetOrganisationFilter = (organisation_id) => {\r\n\t\tthis.props.setOrganisationFilter(organisation_id);\r\n\t\tthis.tableRef.current.onQueryChange();\r\n\t}\r\n\r\n\tclearOrganisationFilter = () => {\r\n\t\tthis.props.clearOrganisationFilter();\r\n\t\tthis.tableRef.current.onQueryChange();\r\n\t}\r\n\r\n\tsetMobileFilter = (mobile_id) => {\r\n\t\tthis.props.setMobileFilter(mobile_id);\r\n\t\tthis.tableRef.current.onQueryChange();\r\n\t}\r\n\r\n\tclearMobileFilter = () => {\r\n\t\tthis.props.clearMobileFilter();\r\n\t\tthis.tableRef.current.onQueryChange();\r\n\t}\r\n\r\n\tsetRouteFilter = (route_id) => {\r\n\t\tthis.props.setRouteFilter(route_id);\r\n\t\tthis.tableRef.current.onQueryChange();\r\n\t}\r\n\r\n\tclearRouteFilter = () => {\r\n\t\tthis.props.clearRouteFilter();\r\n\t\tthis.tableRef.current.onQueryChange();\r\n\t}\r\n\r\n\tgetStopCalendar = (event, rowData) => {\r\n\r\n\t}\r\n\r\n\tgetStopPdf = (event, rowData) => {\r\n\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tclasses, organisations, organisation_lookup, organisation_filter, viewStopsByOrganisation,\r\n\t\t\tmobiles, mobile_lookup, mobile_filter,\r\n\t\t\troutes, route_lookup, route_filter } = this.props;\r\n\t\tlet orgText = {}\r\n\t\tObject.keys(organisation_lookup).forEach(key => {\r\n\t\t\torgText[key] = organisation_lookup[key].name;\r\n\t\t});\r\n\t\tlet mobileText = {}\r\n\t\tObject.keys(mobile_lookup).forEach(key => {\r\n\t\t\tmobileText[key] = mobile_lookup[key].name;\r\n\t\t});\r\n\t\tlet routeText = {}\r\n\t\tObject.keys(route_lookup).forEach(key => {\r\n\t\t\trouteText[key] = route_lookup[key].name;\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<div style={{ maxWidth: '100%' }}>\r\n\t\t\t\t<Filters\r\n\t\t\t\t\tdisplayStopLink={false}\r\n\t\t\t\t\torganisations={organisations}\r\n\t\t\t\t\torganisation_lookup={organisation_lookup}\r\n\t\t\t\t\torganisation_filter={organisation_filter}\r\n\t\t\t\t\tsetOrganisationFilter={this.setOrganisationFilter}\r\n\t\t\t\t\tclearOrganisationFilter={this.clearOrganisationFilter}\r\n\t\t\t\t\tviewStopsByOrganisation={viewStopsByOrganisation}\r\n\t\t\t\t\tmobiles={mobiles}\r\n\t\t\t\t\tmobile_lookup={mobile_lookup}\r\n\t\t\t\t\tmobile_filter={mobile_filter}\r\n\t\t\t\t\tsetMobileFilter={this.setMobileFilter}\r\n\t\t\t\t\tclearMobileFilter={this.clearMobileFilter}\r\n\t\t\t\t\troutes={routes}\r\n\t\t\t\t\troute_lookup={route_lookup}\r\n\t\t\t\t\troute_filter={route_filter}\r\n\t\t\t\t\tsetRouteFilter={this.setRouteFilter}\r\n\t\t\t\t\tclearRouteFilter={this.clearRouteFilter}\r\n\t\t\t\t/>\r\n\t\t\t\t<MaterialTable\r\n\t\t\t\t\ttableRef={this.tableRef}\r\n\t\t\t\t\tcomponents={{\r\n\t\t\t\t\t\tContainer: props => <Paper {...props} elevation={0} className={classes.table} />\r\n\t\t\t\t\t}}\r\n\t\t\t\t\ticons={{\r\n\t\t\t\t\t\tFilter: FilterList,\r\n\t\t\t\t\t\tFirstPage: FirstPage,\r\n\t\t\t\t\t\tLastPage: LastPage,\r\n\t\t\t\t\t\tNextPage: ChevronRight,\r\n\t\t\t\t\t\tPreviousPage: ChevronLeft\r\n\t\t\t\t\t}}\r\n\t\t\t\t\toptions={{\r\n\t\t\t\t\t\tsearch: false,\r\n\t\t\t\t\t\tloadingType: 'linear',\r\n\t\t\t\t\t\tactionsColumnIndex: 4,\r\n\t\t\t\t\t\tfiltering: false\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tcolumns={[\r\n\t\t\t\t\t\t{ title: 'Name', field: 'name', filtering: false },\r\n\t\t\t\t\t\t{ title: 'Community', field: 'community', filtering: false },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: 'Arrival',\r\n\t\t\t\t\t\t\tfield: 'arrival',\r\n\t\t\t\t\t\t\tfiltering: false,\r\n\t\t\t\t\t\t\trender: (rowData) => {\r\n\t\t\t\t\t\t\t\treturn moment(rowData.arrival, 'HH:mm:ssZ').format('HH:mma');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: 'Departure',\r\n\t\t\t\t\t\t\tfield: 'departure',\r\n\t\t\t\t\t\t\tfiltering: false,\r\n\t\t\t\t\t\t\trender: (rowData) => {\r\n\t\t\t\t\t\t\t\treturn moment(rowData.departure, 'HH:mm:ssZ').format('HH:mma');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tactions={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ticon: () => <Event color='action' fontSize='small' />,\r\n\t\t\t\t\t\t\ticonProps: {\r\n\t\t\t\t\t\t\t\tcolor: 'primary'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttooltip: 'Download stop calendar',\r\n\t\t\t\t\t\t\tonClick: this.getStopCalendar\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ticon: () => <PictureAsPdfIcon color='action' fontSize='small' />,\r\n\t\t\t\t\t\t\ticonProps: {\r\n\t\t\t\t\t\t\t\tcolor: 'primary'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttooltip: 'Download stop as PDF',\r\n\t\t\t\t\t\t\tonClick: this.getStopPdf\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tdata={query =>\r\n\t\t\t\t\t\tnew Promise((resolve, reject) => {\r\n\t\t\t\t\t\t\tstopsHelper.getQueryStops(query, this.props.organisation_filter, this.props.mobile_filter, this.props.route_filter, stopData => {\r\n\t\t\t\t\t\t\t\tresolve({\r\n\t\t\t\t\t\t\t\t\tdata: stopData.stops,\r\n\t\t\t\t\t\t\t\t\tpage: (stopData.page - 1),\r\n\t\t\t\t\t\t\t\t\ttotalCount: stopData.total,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttitle={this.state.title}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nStops.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(Stops);","// Axios for making requests\r\nimport axios from 'axios';\r\n\r\nconst config = require('./config.json');\r\n\r\nexport function getAllMobiles(callback) {\r\n\taxios.get(config.api + '/api/mobiles')\r\n\t\t.then(response => {\r\n\t\t\tif (response && response.data) {\r\n\t\t\t\tcallback(response.data);\r\n\t\t\t} else {\r\n\t\t\t\tcallback([]);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err => callback([]));\r\n}\r\n\r\nexport function getMobileLocations(callback) {\r\n\taxios.get(config.api + '/api/mobiles/locations')\r\n\t\t.then(response => {\r\n\t\t\tif (response && response.data) {\r\n\t\t\t\tcallback(response.data);\r\n\t\t\t} else {\r\n\t\t\t\tcallback([]);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err => callback([]));\r\n}","// Axios for making requests\r\nimport axios from 'axios';\r\n\r\nconst config = require('./config.json');\r\n\r\nexport function getAllOrganisations(callback) {\r\n\taxios.get(config.api + '/api/organisations')\r\n\t\t.then(response => {\r\n\t\t\tif (response && response.data) {\r\n\t\t\t\tcallback(response.data);\r\n\t\t\t} else {\r\n\t\t\t\tcallback([]);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err => callback([]));\r\n}","// Axios for making requests\r\nimport axios from 'axios';\r\n\r\nconst config = require('./config.json');\r\n\r\nexport function getAllRoutes(callback) {\r\n\taxios.get(config.api + '/api/routes')\r\n\t\t.then(response => {\r\n\t\t\tif (response && response.data) {\r\n\t\t\t\tcallback(response.data);\r\n\t\t\t} else {\r\n\t\t\t\tcallback([]);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err => callback([]));\r\n}","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Material UI\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\n\r\n// MUI Style\r\nimport blue from '@material-ui/core/colors/blue';\r\nimport deepOrange from '@material-ui/core/colors/deepOrange';\r\nimport red from '@material-ui/core/colors/red';\r\nimport { MuiThemeProvider, createMuiTheme, withStyles } from '@material-ui/core/styles';\r\n\r\n// Our components\r\nimport AppHeader from './AppHeader';\r\nimport Mobiles from './Mobiles';\r\nimport MobileMap from './MobileMap';\r\nimport Stops from './Stops';\r\n\r\nimport * as mobilesHelper from './helpers/mobiles';\r\nimport * as organisationsHelper from './helpers/organisations';\r\nimport * as routesHelper from './helpers/routes';\r\n\r\nconst theme = createMuiTheme({\r\n\tpalette: {\r\n\t\tprimary: blue,\r\n\t\tsecondary: deepOrange,\r\n\t\terror: red\r\n\t},\r\n\toverrides: {\r\n\t\tMuiButton: {\r\n\t\t\ttext: {\r\n\t\t\t\ttextTransform: 'inherit'\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nconst styles = theme => ({\r\n\troot: {\r\n\t\tdisplay: 'flex'\r\n\t},\r\n\ttoolbar: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\tpadding: '0 8px',\r\n\t\t...theme.mixins.toolbar\r\n\t},\r\n\tcontent: {\r\n\t\tflexGrow: 1,\r\n\t\tpadding: theme.spacing(3)\r\n\t}\r\n});\r\n\r\nclass App extends Component {\r\n\tstate = {\r\n\t\tpage: 'mobiles',\r\n\t\t// Data storage\r\n\t\torganisations: [],\r\n\t\torganisation_lookup: {},\r\n\t\torganisation_filter: [],\r\n\t\tmobiles: [],\r\n\t\tmobile_lookup: {},\r\n\t\tmobile_filter: [],\r\n\t\tmobile_locations: [],\r\n\t\tmobile_location_lookup: {},\r\n\t\tlocation_timer: null,\r\n\t\troutes: [],\r\n\t\troute_lookup: {},\r\n\t\troute_filter: [],\r\n\t\t// Map variables, sent down to the map for updates.\r\n\t\tfit_bounds: null,\r\n\t\tposition: [-2.1000, 53.6138],\r\n\t\tzoom: [6],\r\n\t\tpitch: [0],\r\n\t\tbearing: [0]\r\n\t};\r\n\r\n\tgetOrganisations = () => {\r\n\t\torganisationsHelper.getAllOrganisations(organisations => {\r\n\t\t\tlet organisation_lookup = {};\r\n\t\t\torganisations.forEach(organisation => organisation_lookup[organisation.id] = organisation);\r\n\t\t\tthis.setState({ organisations: organisations, organisation_lookup: organisation_lookup })\r\n\t\t});\r\n\t}\r\n\r\n\tgetMobiles = () => {\r\n\t\tmobilesHelper.getAllMobiles(mobiles => {\r\n\t\t\tlet mobile_lookup = {};\r\n\t\t\tmobiles.forEach(mobile => mobile_lookup[mobile.id] = mobile);\r\n\t\t\tthis.setState({ mobiles: mobiles, mobile_lookup: mobile_lookup });\r\n\t\t});\r\n\t}\r\n\r\n\tgetRoutes = () => {\r\n\t\troutesHelper.getAllRoutes(routes => {\r\n\t\t\tlet route_lookup = {};\r\n\t\t\troutes.forEach(route => route_lookup[route.id] = route);\r\n\t\t\tthis.setState({ routes: routes, route_lookup: route_lookup })\r\n\t\t});\r\n\t}\r\n\r\n\tgetMobileLocations = () => {\r\n\t\tmobilesHelper.getMobileLocations(locations => {\r\n\t\t\tlet mobile_location_lookup = {};\r\n\t\t\tlocations.forEach(location => mobile_location_lookup[location.mobile_id] = location);\r\n\t\t\tthis.setState({ mobile_locations: locations, mobile_location_lookup: mobile_location_lookup });\r\n\t\t});\r\n\t}\r\n\r\n\t// componentDidMount: sets up data and any logging\r\n\tcomponentDidMount = () => {\r\n\t\tthis.getOrganisations();\r\n\t\tthis.getMobiles();\r\n\t\tthis.getRoutes();\r\n\t\t// Set up a timer for the mobile locations\r\n\t\tthis.getMobileLocations();\r\n\t\tconst location_timer = setInterval(() => {\r\n\t\t\tthis.getMobileLocations();\r\n\t\t}, 15000);\r\n\t\tthis.setState({ location_timer: location_timer });\r\n\t}\r\n\r\n\tsetPage = (page) => this.setState({ page: page })\r\n\r\n\tviewStopsByOrganisation = (organisation_id) => this.setState({ page: 'stops', organisation_filter: [organisation_id], mobile_filter: [], route_filter: [] });\r\n\tviewStopsByMobile = (mobile_id) => this.setState({ page: 'stops', organisation_filter: [], mobile_filter: [mobile_id], route_filter: [] });\r\n\tviewStopsByRoute = (route_id) => this.setState({ page: 'stops', organisation_filter: [], mobile_filter: [], route_filter: [route_id] });\r\n\r\n\tclearOrganisationFilter = () => this.setState({ organisation_filter: [], mobile_filter: [], route_filter: [] });\r\n\tclearMobileFilter = () => this.setState({ mobile_filter: [], route_filter: [] });\r\n\tclearRouteFilter = () => this.setState({ route_filter: [] });\r\n\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\treturn (\r\n\t\t\t<MuiThemeProvider theme={theme}>\r\n\t\t\t\t<div className={classes.root}>\r\n\t\t\t\t\t<CssBaseline />\r\n\t\t\t\t\t<AppHeader\r\n\t\t\t\t\t\tpage={this.state.page}\r\n\t\t\t\t\t\tsetPage={this.setPage} />\r\n\t\t\t\t\t<main className={classes.content}>\r\n\t\t\t\t\t\t<div className={classes.toolbar} />\r\n\t\t\t\t\t\t{this.state.page === 'mobiles' ?\r\n\t\t\t\t\t\t\t<Mobiles\r\n\t\t\t\t\t\t\t\tmobiles={this.state.mobiles}\r\n\t\t\t\t\t\t\t\tmobile_lookup={this.state.mobile_lookup}\r\n\t\t\t\t\t\t\t\tmobile_location_lookup={this.state.mobile_location_lookup}\r\n\t\t\t\t\t\t\t\torganisation_lookup={this.state.organisation_lookup}\r\n\t\t\t\t\t\t\t\tviewStopsByMobile={this.viewStopsByMobile}\r\n\t\t\t\t\t\t\t\tviewStopsByOrganisation={this.viewStopsByOrganisation}\r\n\t\t\t\t\t\t\t\torganisations={this.state.organisations}\r\n\t\t\t\t\t\t\t\torganisation_filter={this.state.organisation_filter}\r\n\t\t\t\t\t\t\t\tsetOrganisationFilter={(organisation_id) => { this.setState({ organisation_filter: [organisation_id] }) }}\r\n\t\t\t\t\t\t\t\tclearOrganisationFilter={this.clearOrganisationFilter}\r\n\t\t\t\t\t\t\t\tmobile_filter={this.state.mobile_filter}\r\n\t\t\t\t\t\t\t\tsetMobileFilter={(mobile_id) => { this.setState({ mobile_filter: [mobile_id] }) }}\r\n\t\t\t\t\t\t\t\tclearMobileFilter={this.clearMobileFilter}\r\n\t\t\t\t\t\t\t\troutes={this.state.routes}\r\n\t\t\t\t\t\t\t\troute_lookup={this.state.route_lookup}\r\n\t\t\t\t\t\t\t\troute_filter={this.state.route_filter}\r\n\t\t\t\t\t\t\t\tsetRouteFilter={(route_id) => { this.setState({ route_filter: [route_id] }) }}\r\n\t\t\t\t\t\t\t\tclearRouteFilter={this.clearRouteFilter}\r\n\t\t\t\t\t\t\t/> : null}\r\n\t\t\t\t\t\t{this.state.page === 'stops' ?\r\n\t\t\t\t\t\t\t<Stops\r\n\t\t\t\t\t\t\t\torganisations={this.state.organisations}\r\n\t\t\t\t\t\t\t\torganisation_lookup={this.state.organisation_lookup}\r\n\t\t\t\t\t\t\t\torganisation_filter={this.state.organisation_filter}\r\n\t\t\t\t\t\t\t\tsetOrganisationFilter={(organisation_id) => { this.setState({ organisation_filter: [organisation_id] }) }}\r\n\t\t\t\t\t\t\t\tclearOrganisationFilter={this.clearOrganisationFilter}\r\n\t\t\t\t\t\t\t\tmobiles={this.state.mobiles}\r\n\t\t\t\t\t\t\t\tmobile_lookup={this.state.mobile_lookup}\r\n\t\t\t\t\t\t\t\tmobile_filter={this.state.mobile_filter}\r\n\t\t\t\t\t\t\t\tsetMobileFilter={(mobile_id) => { this.setState({ mobile_filter: [mobile_id] }) }}\r\n\t\t\t\t\t\t\t\tclearMobileFilter={this.clearMobileFilter}\r\n\t\t\t\t\t\t\t\troutes={this.state.routes}\r\n\t\t\t\t\t\t\t\troute_lookup={this.state.route_lookup}\r\n\t\t\t\t\t\t\t\troute_filter={this.state.route_filter}\r\n\t\t\t\t\t\t\t\tsetRouteFilter={(route_id) => { this.setState({ route_filter: [route_id] }) }}\r\n\t\t\t\t\t\t\t\tclearRouteFilter={this.clearRouteFilter}\r\n\t\t\t\t\t\t\t/> : null}\r\n\t\t\t\t\t\t{this.state.page === 'map' ?\r\n\t\t\t\t\t\t\t<MobileMap\r\n\t\t\t\t\t\t\t\tbearing={this.state.bearing}\r\n\t\t\t\t\t\t\t\tfit_bounds={this.state.fit_bounds}\r\n\t\t\t\t\t\t\t\tpitch={this.state.pitch}\r\n\t\t\t\t\t\t\t\tposition={this.state.position}\r\n\t\t\t\t\t\t\t\tzoom={this.state.zoom}\r\n\t\t\t\t\t\t\t\tmobile_lookup={this.state.mobile_lookup}\r\n\t\t\t\t\t\t\t\tmobile_locations={this.state.mobile_locations.filter(l => l.geox !== null)}\r\n\t\t\t\t\t\t\t/> : null}\r\n\t\t\t\t\t</main>\r\n\t\t\t\t</div>\r\n\t\t\t</MuiThemeProvider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nApp.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles)(App);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n// Our app entry point\nimport App from './App';\n\n// Service worker for PWA behaviour\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}