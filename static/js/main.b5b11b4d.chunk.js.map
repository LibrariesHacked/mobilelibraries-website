{"version":3,"sources":["AppDrawer.js","AppHeader.js","MobileCard.js","Mobiles.js","MobileAvatar.js","MobileMap.js","OrganisationCard.js","Organisations.js","RouteCard.js","Routes.js","helpers/stops.js","Stops.js","helpers/mobiles.js","helpers/organisations.js","helpers/routes.js","App.js","serviceWorker.js","index.js"],"names":["AppDrawer","_clsx","_clsx2","_this","this","_this$props","props","drawer_open","classes","theme","react_default","a","createElement","Drawer","variant","className","clsx","drawer","Object","defineProperty","drawerOpen","drawerClose","paper","open","toolbar","IconButton","onClick","closeDrawer","direction","ChevronRight_default","ChevronLeft_default","Divider","List","ListItem","button","setDashboard","ListItemIcon","listItemIcon","Business_default","ListItemText","primary","DirectionsBus_default","Directions_default","LocationOn_default","Component","withStyles","width","flexShrink","whiteSpace","transition","transitions","create","easing","sharp","duration","enteringScreen","leavingScreen","overflowX","spacing","breakpoints","up","objectSpread","display","alignItems","justifyContent","padding","mixins","paddingLeft","withTheme","AppHeader","AppBar","position","elevation","color","appBar","appBarShift","Toolbar","aria-label","openDrawer","edge","menuButton","hide","Menu_default","Typography","noWrap","grow","setPage","Dashboard_default","Map_default","zIndex","marginLeft","concat","flexGrow","marginRight","MobileCard","state","_this2","mobile","organisation","location","Grid","item","xs","Card","card","CardContent","title","gutterBottom","name","component","Breadcrumbs","separator","previous_stop_id","Chip","size","label","previous_stop_name","current_stop_id","geox","next_stop_id","current_stop_name","moment","next_stop_arrival","format","next_stop_name","CardActions","Tooltip","Badge","badgeContent","number_stops","margin","Button","viewStopsByMobile","id","leftIcon","number_routes","verticalDivider","PictureAsPdf_default","minWidth","border","bullet","transform","height","fontSize","fontWeight","Dashboard","mobiles","organisation_lookup","mobile_location_lookup","root","ListSubheader","container","map","idx","src_MobileCard","key","replace","organisation_id","MobileAvatar","Fab","fab","boxShadow","Map","ReactMapboxGl","minZoom","maxZoom","scrollZoom","interactive","dragRotate","attributionControl","MobileMap","zoom","pitch","bearing","fit_bounds","mobile_locations","mobile_lookup","MobileMap_Map","style","center","fitBounds","containerStyle","top","bottom","right","left","length","l","lib_esm","coordinates","geoy","anchor","src_MobileAvatar","mobile_id","tileJsonSource","type","tiles","sourceId","sourceLayer","layout","paint","circle-radius","circle-color","circle-stroke-width","circle-stroke-color","circle-opacity","text-ignore-placement","text-field","text-size","text-font","text-line-height","text-anchor","text-halo-color","text-halo-width","text-halo-blur","text-color","OrganisationCard","viewStopsByOrganisation","Organisations","organisations","src_OrganisationCard","RouteCard","route","viewStopsByRoute","Routes","routes","src_RouteCard","config","require","Stops","tableRef","React","createRef","getStopCalendar","event","rowData","getStopPdf","route_lookup","orgText","keys","forEach","mobileText","routeText","maxWidth","dist_default","components","Container","Paper","assign","table","icons","Filter","FilterList","FirstPage","LastPage","NextPage","ChevronRight","PreviousPage","ChevronLeft","options","search","loadingType","actionsColumnIndex","filtering","columns","field","defaultFilter","organisation_filter","lookup","fitering","mobile_filter","route_filter","render","arrival","departure","actions","icon","Event_default","iconProps","tooltip","data","query","Promise","resolve","reject","callback","organisation_filters","mobile_filters","route_filters","filters","filter","column","value","url","api","page","pageSize","orderBy","orderDirection","join","axios","get","then","response","stops","total","parseInt","headers","catch","err","stopsHelper","stopData","totalCount","createMuiTheme","palette","blue","secondary","green","error","red","overrides","MuiButton","text","textTransform","App","dashboard","location_timer","getOrganisations","setState","getMobiles","getRoutes","getMobileLocations","locations","componentDidMount","setInterval","route_id","MuiThemeProvider","CssBaseline","src_AppHeader","src_AppDrawer","content","src_Organisations","Mobiles","src_Routes","src_Stops","src_MobileMap","Boolean","window","hostname","match","ReactDOM","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b5b11b4d.chunk.js","sourcesContent":["// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\n\r\n// Material UI\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\n\r\n// MUI Icons\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport BusinessIcon from '@material-ui/icons/Business';\r\nimport DirectionBusIcon from '@material-ui/icons/DirectionsBus';\r\nimport DirectionsIcon from '@material-ui/icons/Directions';\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\n\r\n// Material UI Styles\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst styles = theme => ({\r\n\tdrawer: {\r\n\t\twidth: drawerWidth,\r\n\t\tflexShrink: 0,\r\n\t\twhiteSpace: 'nowrap'\r\n\t},\r\n\tdrawerOpen: {\r\n\t\twidth: drawerWidth,\r\n\t\ttransition: theme.transitions.create('width', {\r\n\t\t\teasing: theme.transitions.easing.sharp,\r\n\t\t\tduration: theme.transitions.duration.enteringScreen\r\n\t\t})\r\n\t},\r\n\tdrawerClose: {\r\n\t\ttransition: theme.transitions.create('width', {\r\n\t\t\teasing: theme.transitions.easing.sharp,\r\n\t\t\tduration: theme.transitions.duration.leavingScreen\r\n\t\t}),\r\n\t\toverflowX: 'hidden',\r\n\t\twidth: theme.spacing(7) + 1,\r\n\t\t[theme.breakpoints.up('sm')]: {\r\n\t\t\twidth: theme.spacing(9) + 1\r\n\t\t}\r\n\t},\r\n\ttoolbar: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\tpadding: '0 8px',\r\n\t\t...theme.mixins.toolbar\r\n\t},\r\n\tlistItemIcon: {\r\n\t\t[theme.breakpoints.up('sm')]: {\r\n\t\t\tpaddingLeft: '8px'\r\n\t\t}\r\n\t}\r\n});\r\n\r\nclass AppDrawer extends Component {\r\n\r\n\trender() {\r\n\t\tconst { drawer_open, classes, theme } = this.props;\r\n\t\treturn (\r\n\t\t\t<Drawer\r\n\t\t\t\tvariant=\"permanent\"\r\n\t\t\t\tclassName={clsx(classes.drawer, {\r\n\t\t\t\t\t[classes.drawerOpen]: drawer_open,\r\n\t\t\t\t\t[classes.drawerClose]: !drawer_open,\r\n\t\t\t\t})}\r\n\t\t\t\tclasses={{\r\n\t\t\t\t\tpaper: clsx({\r\n\t\t\t\t\t\t[classes.drawerOpen]: drawer_open,\r\n\t\t\t\t\t\t[classes.drawerClose]: !drawer_open,\r\n\t\t\t\t\t}),\r\n\t\t\t\t}}\r\n\t\t\t\topen={drawer_open}\r\n\t\t\t>\r\n\t\t\t\t<div className={classes.toolbar}>\r\n\t\t\t\t\t<IconButton onClick={this.props.closeDrawer}>\r\n\t\t\t\t\t\t{theme.direction === 'rtl' ? <ChevronRightIcon /> : <ChevronLeftIcon />}\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Divider />\r\n\t\t\t\t<List>\r\n\t\t\t\t\t<ListItem button onClick={() => this.props.setDashboard('organisations')}>\r\n\t\t\t\t\t\t<ListItemIcon className={classes.listItemIcon}><BusinessIcon /></ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary=\"Organisations\" />\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t<ListItem button onClick={() => this.props.setDashboard('mobiles')}>\r\n\t\t\t\t\t\t<ListItemIcon className={classes.listItemIcon}><DirectionBusIcon /></ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary=\"Mobiles\" />\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t<ListItem button onClick={() => this.props.setDashboard('routes')}>\r\n\t\t\t\t\t\t<ListItemIcon className={classes.listItemIcon}><DirectionsIcon /></ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary=\"Routes\" />\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t<ListItem button onClick={() => this.props.setDashboard('stops')}>\r\n\t\t\t\t\t\t<ListItemIcon className={classes.listItemIcon}><LocationOnIcon /></ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary=\"Stops\" />\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t</List>\r\n\t\t\t</Drawer>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAppDrawer.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(AppDrawer);","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\n\r\n// Material UI\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\n// Material Icons\r\nimport DashboardIcon from '@material-ui/icons/Dashboard';\r\nimport MapIcon from '@material-ui/icons/Map';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\n// Material UI Styles\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst styles = theme => ({\r\n\tappBar: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\ttransition: theme.transitions.create(['width', 'margin'], {\r\n\t\t\teasing: theme.transitions.easing.sharp,\r\n\t\t\tduration: theme.transitions.duration.leavingScreen\r\n\t\t})\r\n\t},\r\n\tappBarShift: {\r\n\t\tmarginLeft: drawerWidth,\r\n\t\twidth: `calc(100% - ${drawerWidth}px)`,\r\n\t\ttransition: theme.transitions.create(['width', 'margin'], {\r\n\t\t\teasing: theme.transitions.easing.sharp,\r\n\t\t\tduration: theme.transitions.duration.enteringScreen\r\n\t\t})\r\n\t},\r\n\tgrow: {\r\n\t\tflexGrow: 1,\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginRight: 36\r\n\t},\r\n\thide: {\r\n\t\tdisplay: 'none'\r\n\t}\r\n});\r\n\r\nclass AppHeader extends Component {\r\n\r\n\trender() {\r\n\t\tconst { classes, drawer_open } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<AppBar\r\n\t\t\t\tposition=\"fixed\"\r\n\t\t\t\televation={0}\r\n\t\t\t\tcolor=\"default\"\r\n\t\t\t\tclassName={clsx(classes.appBar, {\r\n\t\t\t\t\t[classes.appBarShift]: drawer_open,\r\n\t\t\t\t})}\r\n\t\t\t>\r\n\t\t\t\t<Toolbar>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\t\taria-label=\"Open drawer\"\r\n\t\t\t\t\t\tonClick={this.props.openDrawer}\r\n\t\t\t\t\t\tedge=\"start\"\r\n\t\t\t\t\t\tclassName={clsx(classes.menuButton, {\r\n\t\t\t\t\t\t\t[classes.hide]: drawer_open\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<MenuIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<Typography variant=\"h6\" color=\"inherit\" noWrap>Mobile Libraries</Typography>\r\n\t\t\t\t\t<div className={classes.grow} />\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tonClick={() => this.props.setPage('dashboard')}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<DashboardIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\tonClick={() => this.props.setPage('map')}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<MapIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</AppBar>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nAppHeader.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(AppHeader);","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Material UI\r\nimport Badge from '@material-ui/core/Badge';\r\nimport Button from '@material-ui/core/Button';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\n// MUI Icons\r\nimport DirectionsIcon from '@material-ui/icons/Directions';\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\r\n\r\n// Material UI Styles\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Breadcrumbs } from '@material-ui/core';\r\n\r\nimport moment from 'moment';\r\n\r\nconst styles = theme => ({\r\n\tcard: {\r\n\t\tminWidth: 275,\r\n\t\tborder: '1px solid rgba(0, 0, 0, 0.12)'\r\n\t},\r\n\tbullet: {\r\n\t\tdisplay: 'inline-block',\r\n\t\tmargin: '0 2px',\r\n\t\ttransform: 'scale(0.8)'\r\n\t},\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(2)\r\n\t},\r\n\tverticalDivider: {\r\n\t\twidth: 1,\r\n\t\theight: 28,\r\n\t\tmargin: 8\r\n\t},\r\n\tleftIcon: {\r\n\t\tmarginRight: theme.spacing(1),\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: 12,\r\n\t\tfontWeight: 500\r\n\t}\r\n});\r\n\r\nclass MobileCard extends Component {\r\n\tstate = {\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { classes, mobile, organisation, location } = this.props;\r\n\t\treturn (\r\n\t\t\t<Grid item xs={4}>\r\n\t\t\t\t<Card className={classes.card} elevation={0}>\r\n\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t<Typography className={classes.title} color=\"textSecondary\" gutterBottom>{organisation ? organisation.name : ''}</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" component=\"h2\">{mobile.name}</Typography>\r\n\t\t\t\t\t\t<Breadcrumbs separator=\"â€º\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlocation && location.previous_stop_id ?\r\n\t\t\t\t\t\t\t\t\t<Chip size=\"small\" label={location.previous_stop_name} />\r\n\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlocation && !location.current_stop_id && !location.previous_stop_id & !location.geox ?\r\n\t\t\t\t\t\t\t\t\t<Chip size=\"small\" color=\"primary\" label=\"Off Road\" />\r\n\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlocation && !location.current_stop_id && location.previous_stop_id && location.next_stop_id && location.geox ?\r\n\t\t\t\t\t\t\t\t\t<Chip size=\"small\" color=\"primary\" label=\"Travelling\" />\r\n\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlocation && location.current_stop_id ?\r\n\t\t\t\t\t\t\t\t\t<Chip size=\"small\" color=\"primary\" label={location.current_stop_name} />\r\n\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlocation && location.next_stop_id ?\r\n\t\t\t\t\t\t\t\t\t<Chip size=\"small\" label={moment(location.next_stop_arrival).format('HH:mma') + ' ' + location.next_stop_name} />\r\n\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Breadcrumbs>\r\n\t\t\t\t\t</CardContent>\r\n\t\t\t\t\t<Divider variant=\"middle\" />\r\n\t\t\t\t\t<CardActions>\r\n\t\t\t\t\t\t<Tooltip title=\"Mobile library stops\">\r\n\t\t\t\t\t\t\t<Badge color=\"primary\" badgeContent={mobile.number_stops} className={classes.margin}>\r\n\t\t\t\t\t\t\t\t<Button size=\"small\" color=\"primary\" className={classes.button} onClick={() => this.props.viewStopsByMobile(mobile.id)}>\r\n\t\t\t\t\t\t\t\t\t<LocationOnIcon className={classes.leftIcon} />Stops\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t<Tooltip title=\"Mobile library routes\">\r\n\t\t\t\t\t\t\t<Badge color=\"primary\" badgeContent={mobile.number_routes} className={classes.margin}>\r\n\t\t\t\t\t\t\t\t<Button size=\"small\" color=\"primary\" className={classes.button}>\r\n\t\t\t\t\t\t\t\t\t<DirectionsIcon className={classes.leftIcon} />Routes\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t<Divider className={classes.verticalDivider} />\r\n\t\t\t\t\t\t<Tooltip title=\"Download PDF timetable for mobile\">\r\n\t\t\t\t\t\t\t<IconButton>\r\n\t\t\t\t\t\t\t\t<PictureAsPdfIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</CardActions>\r\n\t\t\t\t</Card>\r\n\t\t\t</Grid>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMobileCard.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(MobileCard);","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Material UI\r\nimport Grid from '@material-ui/core/Grid';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\n\r\n// Material UI Styles\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport MobileCard from './MobileCard';\r\n\r\nconst styles = theme => ({\r\n\troot: {\r\n\t\tflexGrow: 1\r\n\t}\r\n});\r\n\r\nclass Dashboard extends Component {\r\n\tstate = {\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { classes, mobiles, organisation_lookup, mobile_location_lookup} = this.props;\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<ListSubheader>Mobile libraries</ListSubheader>\r\n\t\t\t\t<Grid container spacing={3}>\r\n\t\t\t\t\t{mobiles.map((mobile, idx) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<MobileCard\r\n\t\t\t\t\t\t\t\tkey={'crd_' + mobile.name.replace(' ', '') + '_' + idx}\r\n\t\t\t\t\t\t\t\tmobile={mobile}\r\n\t\t\t\t\t\t\t\tlocation={mobile_location_lookup[mobile.id]}\r\n\t\t\t\t\t\t\t\torganisation={organisation_lookup[mobile.organisation_id]}\r\n\t\t\t\t\t\t\t\tviewStopsByMobile={this.props.viewStopsByMobile}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nDashboard.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(Dashboard);","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Material UI\r\nimport Fab from '@material-ui/core/Fab';\r\n\r\n// MUI Icons\r\nimport DirectionBusIcon from '@material-ui/icons/DirectionsBus';\r\n\r\n// Material UI Styles\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = theme => ({\r\n\tfab: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tboxShadow: 'none'\r\n\t}\r\n});\r\n\r\nclass MobileAvatar extends Component {\r\n\tstate = {\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { classes, mobile } = this.props;\r\n\t\treturn (\r\n\t\t\t<Fab size=\"small\" color=\"primary\" className={classes.fab}>\r\n\t\t\t\t<DirectionBusIcon />\r\n\t\t\t</Fab>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMobileAvatar.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(MobileAvatar);","// React\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n// Material UI Styles\nimport { withStyles } from '@material-ui/core/styles';\n\n// Mapbox GL\nimport ReactMapboxGl, { ZoomControl, Source, Layer, Marker } from \"react-mapbox-gl\";\n\nimport MobileAvatar from './MobileAvatar';\n\nconst styles = theme => ({\n\n});\n\nconst Map = ReactMapboxGl({\n\tminZoom: 7,\n\tmaxZoom: 18,\n\tscrollZoom: true,\n\tinteractive: true,\n\tdragRotate: true,\n\tattributionControl: true\n});\n\nclass MobileMap extends Component {\n\tstate = {\n\t};\n\n\trender() {\n\t\tconst { position, zoom, pitch, bearing, fit_bounds, mobile_locations, mobile_lookup } = this.props;\n\t\treturn (\n\t\t\t<Map\n\t\t\t\tstyle='style.json'  // eslint-disable-line react/style-prop-object\n\t\t\t\tcenter={position}\n\t\t\t\tzoom={zoom}\n\t\t\t\tmaxZoom={17}\n\t\t\t\tpitch={pitch}\n\t\t\t\tbearing={bearing}\n\t\t\t\tfitBounds={fit_bounds}\n\t\t\t\tcontainerStyle={{ top: 0, bottom: 0, right: 0, left: 0, height: '100vh', width: '100vw', position: 'absolute' }}\n\t\t\t>\n\t\t\t\t{ // The mobile library locations\n\t\t\t\t\tmobile_locations && mobile_locations.length > 0 ?\n\t\t\t\t\t\tmobile_locations.map(l => {\n\t\t\t\t\t\t\treturn <Marker\n\t\t\t\t\t\t\t\tcoordinates={[l.geox, l.geoy]}\n\t\t\t\t\t\t\t\tanchor=\"bottom\">\n\t\t\t\t\t\t\t\t<MobileAvatar\n\t\t\t\t\t\t\t\t\tmobile={mobile_lookup[l.mobile_id]}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Marker>\n\t\t\t\t\t\t}) : null\n\t\t\t\t}\n\t\t\t\t<Source\n\t\t\t\t\tid='src_stops'\n\t\t\t\t\ttileJsonSource={{\n\t\t\t\t\t\ttype: 'vector',\n\t\t\t\t\t\ttiles: [\n\t\t\t\t\t\t\t'https://api.mobilelibraries.org/api/stops/{z}/{x}/{y}.mvt',\n\t\t\t\t\t\t],\n\t\t\t\t\t}} />\n\t\t\t\t<Layer\n\t\t\t\t\tid='lyr_stops_circles'\n\t\t\t\t\ttype='circle'\n\t\t\t\t\tsourceId='src_stops'\n\t\t\t\t\tsourceLayer='stop'\n\t\t\t\t\tlayout={{}}\n\t\t\t\t\tpaint={{\n\t\t\t\t\t\t'circle-radius': 4,\n\t\t\t\t\t\t'circle-color': '#36A2EB',\n\t\t\t\t\t\t'circle-stroke-width': 1,\n\t\t\t\t\t\t'circle-stroke-color': '#FFFFFF',\n\t\t\t\t\t\t'circle-opacity': 0.8\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<Layer\n\t\t\t\t\tid='lyr_stops_labels'\n\t\t\t\t\ttype='symbol'\n\t\t\t\t\tsourceId='src_stops'\n\t\t\t\t\tsourceLayer='stop'\n\t\t\t\t\tlayout={{\n\t\t\t\t\t\t'text-ignore-placement': true,\n\t\t\t\t\t\t'text-field': ['to-string', ['get', 'name']],\n\t\t\t\t\t\t'text-size': [\n\t\t\t\t\t\t\t'interpolate',\n\t\t\t\t\t\t\t['linear'],\n\t\t\t\t\t\t\t['zoom'],\n\t\t\t\t\t\t\t12,\n\t\t\t\t\t\t\t9,\n\t\t\t\t\t\t\t14,\n\t\t\t\t\t\t\t11\n\t\t\t\t\t\t],\n\t\t\t\t\t\t'text-font': [\n\t\t\t\t\t\t\t'Source Sans Pro Regular'\n\t\t\t\t\t\t],\n\t\t\t\t\t\t'text-line-height': 1,\n\t\t\t\t\t\t'text-anchor': 'top'\n\t\t\t\t\t}}\n\t\t\t\t\tpaint={{\n\t\t\t\t\t\t'text-halo-color': '#FFFFFF',\n\t\t\t\t\t\t'text-halo-width': 1,\n\t\t\t\t\t\t'text-halo-blur': 1,\n\t\t\t\t\t\t'text-color': '#36A2EB'\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<ZoomControl position=\"bottom-right\" />\n\t\t\t</Map>\n\t\t);\n\t}\n}\n\nMobileMap.propTypes = {\n\tclasses: PropTypes.object.isRequired\n}\n\nexport default withStyles(styles, { withTheme: true })(MobileMap);","// React\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n// Material UI\nimport Badge from '@material-ui/core/Badge';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Divider from '@material-ui/core/Divider';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\n\n// MUI Icons\nimport DirectionsIcon from '@material-ui/icons/Directions';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\n\n// Material UI Styles\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = theme => ({\n\tcard: {\n\t\tminWidth: 275,\n\t\tborder: '1px solid rgba(0, 0, 0, 0.12)'\n\t},\n\tbullet: {\n\t\tdisplay: 'inline-block',\n\t\tmargin: '0 2px',\n\t\ttransform: 'scale(0.8)'\n\t},\n\tmargin: {\n\t\tmargin: theme.spacing(2)\n\t},\n\tverticalDivider: {\n\t\twidth: 1,\n\t\theight: 28,\n\t\tmargin: 8\n\t},\n\tleftIcon: {\n\t\tmarginRight: theme.spacing(1),\n\t},\n\ttitle: {\n\t\tfontSize: 12,\n\t\tfontWeight: 500\n\t}\n});\n\nclass OrganisationCard extends Component {\n\tstate = {\n\t};\n\n\trender() {\n\t\tconst { classes, organisation } = this.props;\n\t\treturn (\n\t\t\t<Grid item xs={4}>\n\t\t\t\t<Card className={classes.card} elevation={0}>\n\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t<Typography className={classes.title} color=\"textSecondary\" gutterBottom>Scotland</Typography>\n\t\t\t\t\t\t<Typography variant=\"h6\" component=\"h2\">{organisation.name}</Typography>\n\t\t\t\t\t</CardContent>\n\t\t\t\t\t<CardActions>\n\t\t\t\t\t\t<Tooltip title=\"Mobile library stops\">\n\t\t\t\t\t\t\t<Badge color=\"primary\" badgeContent={organisation.number_stops} className={classes.margin}>\n\t\t\t\t\t\t\t\t<Button size=\"small\" color=\"primary\" className={classes.button} onClick={() => this.props.viewStopsByOrganisation(organisation.id)}>\n\t\t\t\t\t\t\t\t\t<LocationOnIcon className={classes.leftIcon} />Stops\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Tooltip title=\"Mobile library routes\">\n\t\t\t\t\t\t\t<Badge color=\"primary\" badgeContent={organisation.number_routes} className={classes.margin}>\n\t\t\t\t\t\t\t\t<Button size=\"small\" color=\"primary\" className={classes.button}>\n\t\t\t\t\t\t\t\t\t<DirectionsIcon className={classes.leftIcon} />Routes\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Divider className={classes.verticalDivider} />\n\t\t\t\t\t\t<Tooltip title=\"Download PDF timetable for mobile\">\n\t\t\t\t\t\t\t<IconButton>\n\t\t\t\t\t\t\t\t<PictureAsPdfIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</CardActions>\n\t\t\t\t</Card>\n\t\t\t</Grid>\n\t\t);\n\t}\n}\n\nOrganisationCard.propTypes = {\n\tclasses: PropTypes.object.isRequired\n}\n\nexport default withStyles(styles, { withTheme: true })(OrganisationCard);","// React\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n// Material UI\nimport Grid from '@material-ui/core/Grid';\nimport ListSubheader from '@material-ui/core/ListSubheader';\n\n// Material UI Styles\nimport { withStyles } from '@material-ui/core/styles';\n\nimport OrganisationCard from './OrganisationCard';\n\nconst styles = theme => ({\n\troot: {\n\t\tflexGrow: 1\n\t}\n});\n\nclass Organisations extends Component {\n\tstate = {\n\t};\n\n\trender() {\n\t\tconst { classes, organisations } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<ListSubheader>Mobile library organisations</ListSubheader>\n\t\t\t\t<Grid container spacing={3}>\n\t\t\t\t\t{organisations.map((organisation, idx) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<OrganisationCard\n\t\t\t\t\t\t\t\tkey={'crd_' + organisation.name.replace(' ', '') + '_' + idx}\n\t\t\t\t\t\t\t\torganisation={organisation}\n\t\t\t\t\t\t\t\tviewStopsByOrganisation={this.props.viewStopsByOrganisation}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nOrganisations.propTypes = {\n\tclasses: PropTypes.object.isRequired\n}\n\nexport default withStyles(styles, { withTheme: true })(Organisations);","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Material UI\r\nimport Badge from '@material-ui/core/Badge';\r\nimport Button from '@material-ui/core/Button';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\n// Material UI Styles\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\n// MUI Icons\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\r\n\r\nconst styles = theme => ({\r\n\tcard: {\r\n\t\tminWidth: 275,\r\n\t\tborder: '1px solid rgba(0, 0, 0, 0.12)'\r\n\t},\r\n\tbullet: {\r\n\t\tdisplay: 'inline-block',\r\n\t\tmargin: '0 2px',\r\n\t\ttransform: 'scale(0.8)'\r\n\t},\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(2)\r\n\t},\r\n\tverticalDivider: {\r\n\t\twidth: 1,\r\n\t\theight: 28,\r\n\t\tmargin: 8\r\n\t},\r\n\tleftIcon: {\r\n\t\tmarginRight: theme.spacing(1),\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: 12,\r\n\t\tfontWeight: 500\r\n\t}\r\n});\r\n\r\nclass RouteCard extends Component {\r\n\tstate = {\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { classes, route, organisation, mobile } = this.props;\r\n\t\treturn (\r\n\t\t\t<Grid item xs={4}>\r\n\t\t\t\t<Card className={classes.card} elevation={0}>\r\n\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t<Typography className={classes.title} color=\"textSecondary\" gutterBottom>\r\n\t\t\t\t\t\t\t{organisation ? organisation.name + ' ' : ''}\r\n\t\t\t\t\t\t\t{mobile ?  mobile.name : ''}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" component=\"h2\">{route.name}</Typography>\r\n\t\t\t\t\t</CardContent>\r\n\t\t\t\t\t<Divider variant=\"middle\" />\r\n\t\t\t\t\t<CardActions>\r\n\t\t\t\t\t\t<Tooltip title=\"Route stops\">\r\n\t\t\t\t\t\t\t<Badge color=\"primary\" badgeContent={route.number_stops} className={classes.margin}>\r\n\t\t\t\t\t\t\t\t<Button size=\"small\" color=\"primary\" className={classes.button} onClick={() => this.props.viewStopsByRoute(route.id)}>\r\n\t\t\t\t\t\t\t\t\t<LocationOnIcon className={classes.leftIcon} />Stops\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t<Divider className={classes.verticalDivider} />\r\n\t\t\t\t\t\t<Tooltip title=\"Download PDF timetable for route\">\r\n\t\t\t\t\t\t\t<IconButton>\r\n\t\t\t\t\t\t\t\t<PictureAsPdfIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</CardActions>\r\n\t\t\t\t</Card>\r\n\t\t\t</Grid>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nRouteCard.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(RouteCard);","// React\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n// Material UI\nimport Grid from '@material-ui/core/Grid';\nimport ListSubheader from '@material-ui/core/ListSubheader';\n\n// Material UI Styles\nimport { withStyles } from '@material-ui/core/styles';\n\nimport RouteCard from './RouteCard';\n\nconst styles = theme => ({\n\troot: {\n\t\tflexGrow: 1\n\t}\n});\n\nclass Routes extends Component {\n\tstate = {\n\t};\n\n\trender() {\n\t\tconst { classes, routes, organisation_lookup, mobile_lookup } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<ListSubheader>Mobile library routes</ListSubheader>\n\t\t\t\t<Grid container spacing={3}>\n\t\t\t\t\t{routes.map((route, idx) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<RouteCard\n\t\t\t\t\t\t\t\tkey={'dsm_' + route.name.replace(' ', '') + '_' + idx}\n\t\t\t\t\t\t\t\troute={route}\n\t\t\t\t\t\t\t\torganisation={organisation_lookup[route.organisation_id]}\n\t\t\t\t\t\t\t\tmobile={mobile_lookup[route.mobile_id]}\n\t\t\t\t\t\t\t\tviewStopsByRoute={this.props.viewStopsByRoute}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</Grid>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nRoutes.propTypes = {\n\tclasses: PropTypes.object.isRequired\n}\n\nexport default withStyles(styles, { withTheme: true })(Routes);","// Axios for making requests\r\nimport axios from 'axios';\r\n\r\nconst config = require('./config.json');\r\n\r\nexport function getQueryStops(query, callback) {\r\n\r\n\tlet organisation_filters = [];\r\n\tlet mobile_filters = [];\r\n\tlet route_filters = [];\r\n\r\n\t// We can either filter by organisation_id or mobile_id, or route id\r\n\tif (query.filters && query.filters.length > 0) {\r\n\t\tquery.filters.forEach(filter => {\r\n\t\t\tif (filter.column.field === 'organisation_id') organisation_filters = filter.value;\r\n\t\t\tif (filter.column.field === 'mobile_id') mobile_filters = filter.value;\r\n\t\t\tif (filter.column.field === 'route_id') route_filters = filter.value;\r\n\t\t});\r\n\t}\r\n\r\n\tlet url = config.api + '/api/stops?page=' + (query.page + 1) + '&limit=' + query.pageSize;\r\n\tif (query.orderBy && query.orderBy.field) url = url + '&sort=' + query.orderBy.field + '&direction=' + query.orderDirection;\r\n\r\n\tif (mobile_filters.length > 0) url = url + '&mobile_ids=' + mobile_filters.join('|');\r\n\tif (organisation_filters.length > 0) url = url + '&organisation_ids=' + organisation_filters.join('|');\r\n\tif (route_filters.length > 0) url = url + '&route_ids=' + route_filters.join('|');\r\n\r\n\taxios.get(url)\r\n\t\t.then(response => {\r\n\t\t\tif (response && response.data) {\r\n\t\t\t\tcallback({\r\n\t\t\t\t\tstops: response.data,\r\n\t\t\t\t\ttotal: parseInt(response.headers['x-total-count']),\r\n\t\t\t\t\tpage: parseInt(response.headers['x-page'])\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tcallback({ stops: [], total: 0, page: 1 });\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err => callback({ stops: [], total: 0, page: 1 }));\r\n}\r\n\r\nexport function getAllStops(callback) {\r\n\taxios.get(config.api + '/api/stops')\r\n\t\t.then(response => {\r\n\t\t\tif (response && response.data) {\r\n\t\t\t\tcallback(response.data);\r\n\t\t\t} else {\r\n\t\t\t\tcallback({});\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err => callback({}));\r\n}","// React\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n// Material UI\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Paper from '@material-ui/core/Paper';\n\n// Material Table\nimport MaterialTable from 'material-table';\n\n// Material UI Styles\nimport { withStyles } from '@material-ui/core/styles';\n\n// MUI Icons\nimport Event from '@material-ui/icons/Event';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport FilterList from '@material-ui/icons/FilterList';\nimport LastPage from '@material-ui/icons/LastPage';\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\n\nimport moment from 'moment';\n\nimport * as stopsHelper from './helpers/stops';\n\nconst styles = theme => ({\n\troot: {\n\t\tflexGrow: 1,\n\t\tmaxWidth: '100%'\n\t},\n\ttable: {\n\t\tborder: '1px solid rgba(0, 0, 0, 0.12)'\n\t}\n});\n\nclass Stops extends Component {\n\tstate = {\n\t\ttitle: 'All stops'\n\t};\n\n\ttableRef = React.createRef();\n\n\tgetStopCalendar = (event, rowData) => {\n\n\t}\n\n\tgetStopPdf = (event, rowData) => {\n\n\t}\n\n\trender() {\n\t\tconst { classes, organisation_lookup, mobile_lookup, route_lookup } = this.props;\n\t\tlet orgText = {}\n\t\tObject.keys(organisation_lookup).forEach(key => {\n\t\t\torgText[key] = organisation_lookup[key].name;\n\t\t});\n\t\tlet mobileText = {}\n\t\tObject.keys(mobile_lookup).forEach(key => {\n\t\t\tmobileText[key] = mobile_lookup[key].name;\n\t\t});\n\t\tlet routeText = {}\n\t\tObject.keys(route_lookup).forEach(key => {\n\t\t\trouteText[key] = route_lookup[key].name;\n\t\t});\n\t\treturn (\n\t\t\t<div style={{ maxWidth: '100%' }}>\n\t\t\t\t<ListSubheader>Mobile library stops</ListSubheader>\n\t\t\t\t<MaterialTable\n\t\t\t\t\ttableRef={this.tableRef}\n\t\t\t\t\tcomponents={{\n\t\t\t\t\t\tContainer: props => <Paper {...props} elevation={0} className={classes.table} />\n\t\t\t\t\t}}\n\t\t\t\t\ticons={{\n\t\t\t\t\t\tFilter: FilterList,\n\t\t\t\t\t\tFirstPage: FirstPage,\n\t\t\t\t\t\tLastPage: LastPage,\n\t\t\t\t\t\tNextPage: ChevronRight,\n\t\t\t\t\t\tPreviousPage: ChevronLeft\n\t\t\t\t\t}}\n\t\t\t\t\toptions={{\n\t\t\t\t\t\tsearch: false,\n\t\t\t\t\t\tloadingType: 'linear',\n\t\t\t\t\t\tactionsColumnIndex: 6,\n\t\t\t\t\t\tfiltering: true\n\t\t\t\t\t}}\n\t\t\t\t\tcolumns={[\n\t\t\t\t\t\t{ title: 'Name', field: 'name', filtering: false },\n\t\t\t\t\t\t{ title: 'Community', field: 'community', filtering: false },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Organisation',\n\t\t\t\t\t\t\tfield: 'organisation_id',\n\t\t\t\t\t\t\ttype: 'numeric',\n\t\t\t\t\t\t\tdefaultFilter: this.props.organisation_filter,\n\t\t\t\t\t\t\tlookup: orgText,\n\t\t\t\t\t\t\tfitering: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Mobile',\n\t\t\t\t\t\t\tfield: 'mobile_id',\n\t\t\t\t\t\t\ttype: 'numeric',\n\t\t\t\t\t\t\tdefaultFilter: this.props.mobile_filter,\n\t\t\t\t\t\t\tlookup: mobileText,\n\t\t\t\t\t\t\tfiltering: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Route',\n\t\t\t\t\t\t\tfield: 'route_id',\n\t\t\t\t\t\t\ttype: 'numeric',\n\t\t\t\t\t\t\tdefaultFilter: this.props.route_filter,\n\t\t\t\t\t\t\tlookup: routeText,\n\t\t\t\t\t\t\tfiltering: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Arrival',\n\t\t\t\t\t\t\tfield: 'arrival',\n\t\t\t\t\t\t\tfiltering: false,\n\t\t\t\t\t\t\trender: (rowData) => {\n\t\t\t\t\t\t\t\treturn moment(rowData.arrival, 'HH:mm:ssZ').format('HH:mma');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Departure',\n\t\t\t\t\t\t\tfield: 'departure',\n\t\t\t\t\t\t\tfiltering: false,\n\t\t\t\t\t\t\trender: (rowData) => {\n\t\t\t\t\t\t\t\treturn moment(rowData.departure, 'HH:mm:ssZ').format('HH:mma');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]}\n\t\t\t\t\tactions={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: () => <Event color='action' fontSize='small' />,\n\t\t\t\t\t\t\ticonProps: {\n\t\t\t\t\t\t\t\tcolor: 'primary'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttooltip: 'Download stop calendar',\n\t\t\t\t\t\t\tonClick: this.getStopCalendar\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: () => <PictureAsPdfIcon color='action' fontSize='small' />,\n\t\t\t\t\t\t\ticonProps: {\n\t\t\t\t\t\t\t\tcolor: 'primary'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttooltip: 'Download stop as PDF',\n\t\t\t\t\t\t\tonClick: this.getStopPdf\n\t\t\t\t\t\t}\n\t\t\t\t\t]}\n\t\t\t\t\tdata={query =>\n\t\t\t\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\t\t\t\tstopsHelper.getQueryStops(query, stopData => {\n\t\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\t\tdata: stopData.stops,\n\t\t\t\t\t\t\t\t\tpage: (stopData.page - 1),\n\t\t\t\t\t\t\t\t\ttotalCount: stopData.total,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\ttitle={this.state.title}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nStops.propTypes = {\n\tclasses: PropTypes.object.isRequired\n}\n\nexport default withStyles(styles, { withTheme: true })(Stops);","// Axios for making requests\r\nimport axios from 'axios';\r\n\r\nconst config = require('./config.json');\r\n\r\nexport function getAllMobiles(callback) {\r\n\taxios.get(config.api + '/api/mobiles')\r\n\t\t.then(response => {\r\n\t\t\tif (response && response.data) {\r\n\t\t\t\tcallback(response.data);\r\n\t\t\t} else {\r\n\t\t\t\tcallback([]);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err => callback([]));\r\n}\r\n\r\nexport function getMobileLocations(callback) {\r\n\taxios.get(config.api + '/api/mobiles/locations')\r\n\t\t.then(response => {\r\n\t\t\tif (response && response.data) {\r\n\t\t\t\tcallback(response.data);\r\n\t\t\t} else {\r\n\t\t\t\tcallback([]);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err => callback([]));\r\n}","// Axios for making requests\r\nimport axios from 'axios';\r\n\r\nconst config = require('./config.json');\r\n\r\nexport function getAllOrganisations(callback) {\r\n\taxios.get(config.api + '/api/organisations')\r\n\t\t.then(response => {\r\n\t\t\tif (response && response.data) {\r\n\t\t\t\tcallback(response.data);\r\n\t\t\t} else {\r\n\t\t\t\tcallback([]);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err => callback([]));\r\n}","// Axios for making requests\r\nimport axios from 'axios';\r\n\r\nconst config = require('./config.json');\r\n\r\nexport function getAllRoutes(callback) {\r\n\taxios.get(config.api + '/api/routes')\r\n\t\t.then(response => {\r\n\t\t\tif (response && response.data) {\r\n\t\t\t\tcallback(response.data);\r\n\t\t\t} else {\r\n\t\t\t\tcallback([]);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err => callback([]));\r\n}","// React\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Material UI\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\n\r\n// MUI Style\r\nimport blue from '@material-ui/core/colors/blue';\r\nimport green from '@material-ui/core/colors/green';\r\nimport red from '@material-ui/core/colors/red';\r\nimport { MuiThemeProvider, createMuiTheme, withStyles } from '@material-ui/core/styles';\r\n\r\n// Our components\r\nimport AppDrawer from './AppDrawer';\r\nimport AppHeader from './AppHeader';\r\nimport Mobiles from './Mobiles';\r\nimport MobileMap from './MobileMap';\r\nimport Organisations from './Organisations';\r\nimport Routes from './Routes';\r\nimport Stops from './Stops';\r\n\r\nimport * as mobilesHelper from './helpers/mobiles';\r\nimport * as organisationsHelper from './helpers/organisations';\r\nimport * as routesHelper from './helpers/routes';\r\n\r\nconst theme = createMuiTheme({\r\n\tpalette: {\r\n\t\tprimary: blue,\r\n\t\tsecondary: green,\r\n\t\terror: red,\r\n\t},\r\n\toverrides: {\r\n\t\tMuiButton: {\r\n\t\t\ttext: {\r\n\t\t\t\ttextTransform: 'inherit'\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nconst styles = theme => ({\r\n\troot: {\r\n\t\tdisplay: 'flex'\r\n\t},\r\n\ttoolbar: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\tpadding: '0 8px',\r\n\t\t...theme.mixins.toolbar\r\n\t},\r\n\tcontent: {\r\n\t\tflexGrow: 1,\r\n\t\tpadding: theme.spacing(3)\r\n\t}\r\n});\r\n\r\nclass App extends Component {\r\n\tstate = {\r\n\t\tdrawer_open: false,\r\n\t\tpage: 'dashboard',\r\n\t\tdashboard: 'mobiles',\r\n\t\t// Data storage\r\n\t\torganisations: [],\r\n\t\torganisation_lookup: {},\r\n\t\torganisation_filter: [],\r\n\t\tmobiles: [],\r\n\t\tmobile_lookup: {},\r\n\t\tmobile_filter: [],\r\n\t\tmobile_locations: [],\r\n\t\tmobile_location_lookup: {},\r\n\t\tlocation_timer: null,\r\n\t\troutes: [],\r\n\t\troute_lookup: {},\r\n\t\troute_filter: [],\r\n\t\t// Map variables, sent down to the map for updates.\r\n\t\tfit_bounds: null,\r\n\t\tposition: [-4.1429, 50.3732],\r\n\t\tzoom: [12],\r\n\t\tpitch: [0],\r\n\t\tbearing: [0]\r\n\t};\r\n\r\n\tgetOrganisations = () => {\r\n\t\torganisationsHelper.getAllOrganisations(organisations => {\r\n\t\t\tlet organisation_lookup = {};\r\n\t\t\torganisations.forEach(organisation => organisation_lookup[organisation.id] = organisation);\r\n\t\t\tthis.setState({ organisations: organisations, organisation_lookup: organisation_lookup })\r\n\t\t});\r\n\t}\r\n\r\n\tgetMobiles = () => {\r\n\t\tmobilesHelper.getAllMobiles(mobiles => {\r\n\t\t\tlet mobile_lookup = {};\r\n\t\t\tmobiles.forEach(mobile => mobile_lookup[mobile.id] = mobile);\r\n\t\t\tthis.setState({ mobiles: mobiles, mobile_lookup: mobile_lookup });\r\n\t\t});\r\n\t}\r\n\r\n\tgetRoutes = () => {\r\n\t\troutesHelper.getAllRoutes(routes => {\r\n\t\t\tlet route_lookup = {};\r\n\t\t\troutes.forEach(route => route_lookup[route.id] = route);\r\n\t\t\tthis.setState({ routes: routes, route_lookup: route_lookup })\r\n\t\t});\r\n\t}\r\n\r\n\tgetMobileLocations = () => {\r\n\t\tmobilesHelper.getMobileLocations(locations => {\r\n\t\t\tlet mobile_location_lookup = {};\r\n\t\t\tlocations.forEach(location => mobile_location_lookup[location.mobile_id] = location);\r\n\t\t\tthis.setState({ mobile_locations: locations, mobile_location_lookup: mobile_location_lookup });\r\n\t\t});\r\n\t}\r\n\r\n\t// componentDidMount: sets up data and any logging\r\n\tcomponentDidMount = () => {\r\n\t\tthis.getOrganisations();\r\n\t\tthis.getMobiles();\r\n\t\tthis.getRoutes();\r\n\t\t// Set up a timer for the mobile locations\r\n\t\tthis.getMobileLocations();\r\n\t\tconst location_timer = setInterval(() => {\r\n\t\t\tthis.getMobileLocations();\r\n\t\t}, 15000);\r\n\t\tthis.setState({ location_timer: location_timer });\r\n\t}\r\n\r\n\tsetPage = (page) => this.setState({ page: page })\r\n\tsetDashboard = (dashboard) => this.setState({ dashboard: dashboard })\r\n\r\n\tviewStopsByOrganisation = (organisation_id) => this.setState({ page: 'dashboard', dashboard: 'stops', organisation_filter: [organisation_id] });\r\n\tviewStopsByMobile = (mobile_id) => this.setState({ page: 'dashboard', dashboard: 'stops', mobile_filter: [mobile_id] });\r\n\tviewStopsByRoute = (route_id) => this.setState({ page: 'dashboard', dashboard: 'stops', route_filter: [route_id] });\r\n\r\n\topenDrawer = () => this.setState({ drawer_open: true })\r\n\tcloseDrawer = () => this.setState({ drawer_open: false })\r\n\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\treturn (\r\n\t\t\t<MuiThemeProvider theme={theme}>\r\n\t\t\t\t<div className={classes.root}>\r\n\t\t\t\t\t<CssBaseline />\r\n\t\t\t\t\t<AppHeader\r\n\t\t\t\t\t\tdrawer_open={this.state.drawer_open}\r\n\t\t\t\t\t\tsetPage={this.setPage}\r\n\t\t\t\t\t\topenDrawer={this.openDrawer} />\r\n\t\t\t\t\t<AppDrawer\r\n\t\t\t\t\t\tdrawer_open={this.state.drawer_open}\r\n\t\t\t\t\t\tsetDashboard={this.setDashboard}\r\n\t\t\t\t\t\tcloseDrawer={this.closeDrawer} />\r\n\t\t\t\t\t<main className={classes.content}>\r\n\t\t\t\t\t\t<div className={classes.toolbar} />\r\n\t\t\t\t\t\t{this.state.page === 'dashboard' && this.state.dashboard === 'organisations' ?\r\n\t\t\t\t\t\t\t<Organisations\r\n\t\t\t\t\t\t\t\torganisations={this.state.organisations}\r\n\t\t\t\t\t\t\t\tviewStopsByOrganisation={this.viewStopsByOrganisation}\r\n\t\t\t\t\t\t\t/> : null}\r\n\t\t\t\t\t\t{this.state.page === 'dashboard' && this.state.dashboard === 'mobiles' ?\r\n\t\t\t\t\t\t\t<Mobiles\r\n\t\t\t\t\t\t\t\tmobiles={this.state.mobiles}\r\n\t\t\t\t\t\t\t\tmobile_lookup={this.state.mobile_lookup}\r\n\t\t\t\t\t\t\t\tmobile_location_lookup={this.state.mobile_location_lookup}\r\n\t\t\t\t\t\t\t\torganisation_lookup={this.state.organisation_lookup}\r\n\t\t\t\t\t\t\t\tviewStopsByMobile={this.viewStopsByMobile}\r\n\t\t\t\t\t\t\t/> : null}\r\n\t\t\t\t\t\t{this.state.page === 'dashboard' && this.state.dashboard === 'routes' ?\r\n\t\t\t\t\t\t\t<Routes\r\n\t\t\t\t\t\t\t\troutes={this.state.routes}\r\n\t\t\t\t\t\t\t\torganisation_lookup={this.state.organisation_lookup}\r\n\t\t\t\t\t\t\t\tmobile_lookup={this.state.mobile_lookup}\r\n\t\t\t\t\t\t\t\tviewStopsByRoute={this.viewStopsByRoute}\r\n\t\t\t\t\t\t\t/> : null}\r\n\t\t\t\t\t\t{this.state.page === 'dashboard' && this.state.dashboard === 'stops' ?\r\n\t\t\t\t\t\t\t<Stops\r\n\t\t\t\t\t\t\t\torganisation_lookup={this.state.organisation_lookup}\r\n\t\t\t\t\t\t\t\torganisation_filter={this.state.organisation_filter}\r\n\t\t\t\t\t\t\t\tmobile_lookup={this.state.mobile_lookup}\r\n\t\t\t\t\t\t\t\tmobile_filter={this.state.mobile_filter}\r\n\t\t\t\t\t\t\t\troute_lookup={this.state.route_lookup}\r\n\t\t\t\t\t\t\t\troute_filter={this.state.route_filter}\r\n\t\t\t\t\t\t\t/> : null}\r\n\t\t\t\t\t\t{this.state.page === 'map' ?\r\n\t\t\t\t\t\t\t<MobileMap\r\n\t\t\t\t\t\t\t\tbearing={this.state.bearing}\r\n\t\t\t\t\t\t\t\tfit_bounds={this.state.fit_bounds}\r\n\t\t\t\t\t\t\t\tpitch={this.state.pitch}\r\n\t\t\t\t\t\t\t\tposition={this.state.position}\r\n\t\t\t\t\t\t\t\tzoom={this.state.zoom}\r\n\t\t\t\t\t\t\t\tmobile_lookup={this.state.mobile_lookup}\r\n\t\t\t\t\t\t\t\tmobile_locations={this.state.mobile_locations.filter(l => l.geox !== null)}\r\n\t\t\t\t\t\t\t/> : null}\r\n\t\t\t\t\t</main>\r\n\t\t\t\t</div>\r\n\t\t\t</MuiThemeProvider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nApp.propTypes = {\r\n\tclasses: PropTypes.object.isRequired\r\n}\r\n\r\nexport default withStyles(styles)(App);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n// Our app entry point\nimport App from './App';\n\n// Service worker for PWA behaviour\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}