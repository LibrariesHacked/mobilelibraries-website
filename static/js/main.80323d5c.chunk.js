(this["webpackJsonpmobilelibraries-website"]=this["webpackJsonpmobilelibraries-website"]||[]).push([[0],{141:function(e){e.exports=JSON.parse('{"api":"https://api.mobilelibraries.org/api"}')},424:function(e,t,a){e.exports=a(743)},743:function(e,t,a){"use strict";a.r(t);a(425),a(434);var o=a(0),n=a.n(o),r=a(18),i=a.n(r),s=a(27),l=a(28),c=a(31),u=a(29),p=a(32),m=a(375),d=a(75),g=a(119),f=a(403),_=a.n(f),h=a(805),b=a(333),y=a(808),v=a(401),E=a.n(v),S=a(402),k=a.n(S),O=a(404),w=a(804),j=a(7),C=a(115),x=a.n(C),F=a(788),M=a(337),N=a(336),R=a(370),B=a(335),D=a(103),P=a(258),T=a.n(P),z=a(169),I=a.n(z),G=a(259),A=a.n(G),W=a(407),L=a(787),Z=a(199),H=a(334),Q=a(372),J=a(145),U=a(377),q=a.n(U),Y=a(380),$=a.n(Y),K=a(379),V=a.n(K),X=a(378),ee=a.n(X),te=a(381),ae=a.n(te),oe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={postcode:a.props.postcode,anchor:null},a.openSettingsMenu=function(e){return a.setState({anchor:e.currentTarget})},a.closeSettingsMenu=function(){return a.setState({anchor:null})},a.setSearchDistance=function(e){a.closeSettingsMenu(),a.props.setDistance(e)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.postcode!==e.postcode&&this.setState({postcode:this.props.postcode})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,o=t.search_type,r=t.postcodeSearch,i=t.clearSearch,s=t.toggleGPS;return n.a.createElement("div",{className:a.search},n.a.createElement(W.a,{placeholder:"Postcode",classes:{root:a.inputRoot,input:a.inputInput},value:this.state.postcode,onChange:function(t){return e.setState({postcode:t.target.value})}}),n.a.createElement("div",{className:a.grow}),"postcode"===o?n.a.createElement(Q.a,{title:"Clear search"},n.a.createElement(b.a,{color:"secondary",className:a.iconButton,onClick:function(){return i()}},n.a.createElement(q.a,null))):null,n.a.createElement(Q.a,{title:"Search by postcode"},n.a.createElement(b.a,{color:"primary",className:a.iconButton,onClick:function(){return r(e.state.postcode)}},n.a.createElement(ee.a,null))),n.a.createElement(Q.a,{title:"Track my location"},n.a.createElement(b.a,{className:a.iconButton,color:"gps"===o?"primary":"secondary",onClick:function(){s()}},"gps"===o?n.a.createElement(V.a,null):n.a.createElement($.a,null))),n.a.createElement(Q.a,{title:"Change search settings"},n.a.createElement(b.a,{className:a.iconButton,color:"secondary",onClick:function(t){e.openSettingsMenu(t)}},n.a.createElement(ae.a,null))),n.a.createElement(Z.a,{id:"mnu-settings",anchorEl:this.state.anchor,keepMounted:!0,open:Boolean(this.state.anchor),onClose:function(){return e.closeSettingsMenu()}},n.a.createElement(L.a,{disableSticky:!0},"Search distance"),n.a.createElement(H.a,{onClick:function(){return e.setSearchDistance(1609)}},"1 mile"),n.a.createElement(H.a,{onClick:function(){return e.setSearchDistance(4827)}},"3 miles"),n.a.createElement(H.a,{onClick:function(){return e.setSearchDistance(8045)}},"5 miles"),n.a.createElement(H.a,{onClick:function(){return e.setSearchDistance(16090)}},"10 miles"),n.a.createElement(H.a,{onClick:function(){return e.setSearchDistance(32180)}},"20 miles")))}}]),t}(n.a.Component),ne=Object(j.a)((function(e){return{grow:{flexGrow:1},iconButton:{padding:10},inputRoot:{color:"inherit"},inputInput:{paddingTop:e.spacing(),paddingRight:e.spacing(),paddingBottom:e.spacing(),paddingLeft:e.spacing(2)},search:{position:"relative",border:"1px solid #e5e5e5",borderRadius:e.shape.borderRadius,backgroundColor:Object(J.fade)(e.palette.common.white,.8),"&:hover":{backgroundColor:Object(J.fade)(e.palette.common.white,.9)},marginLeft:0,marginRight:e.spacing(),display:"flex"}}}))(oe),re=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.classes,o=e.search_type,r=e.postcode,i=e.distance,s=e.toggleGPS,l=e.postcodeSearch,c=e.clearSearch,u=e.setDistance,p=e.location;return n.a.createElement(F.a,{position:"fixed",color:"inherit",elevation:0,className:"/map"===p.pathname?a.appBarTransparent:a.appBar},n.a.createElement(B.a,null,"/map"!==p.pathname?n.a.createElement(R.a,{xsDown:!0},n.a.createElement(D.a,{variant:"h6",color:"error",noWrap:!0},"In development")):null,n.a.createElement("div",{className:a.grow}),t?n.a.createElement(N.a,{className:a.progress,color:"secondary",size:30}):null,"/map"===p.pathname?n.a.createElement(ne,{postcode:r,distance:i,search_type:o,toggleGPS:s,setDistance:u,postcodeSearch:l,clearSearch:c}):null,n.a.createElement(R.a,{smDown:!0},n.a.createElement(n.a.Fragment,null,n.a.createElement(M.a,{component:d.b,to:"/",color:"secondary",onClick:function(){}},n.a.createElement(T.a,{className:a.leftIcon}),"Mobiles"),n.a.createElement(M.a,{component:d.b,to:"/stops",color:"secondary",onClick:function(){}},n.a.createElement(I.a,{className:a.leftIcon}),"Stops"),n.a.createElement(M.a,{component:d.b,to:"/map",color:"secondary",onClick:function(){}},n.a.createElement(A.a,{className:a.leftIcon}),"Map"))),n.a.createElement(R.a,{mdUp:!0},n.a.createElement(n.a.Fragment,null,n.a.createElement(b.a,{component:d.b,to:"/",onClick:function(){}},n.a.createElement(T.a,null)),n.a.createElement(b.a,{component:d.b,to:"/stops",onClick:function(){}},n.a.createElement(I.a,null)),n.a.createElement(b.a,{component:d.b,to:"/map",onClick:function(){}},n.a.createElement(A.a,null))))))}}]),t}(o.Component),ie=x()(g.e,Object(j.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,borderBottom:"1px solid #F5F5F5"},appBarTransparent:{zIndex:e.zIndex.drawer+1,backgroundColor:"rgba(250, 250, 250, 0.5)",borderBottom:"1px solid #F5F5F5"},grow:{flexGrow:1},hide:{display:"none"},leftIcon:{marginRight:e.spacing(1)},progress:{margin:e.spacing(1)}}}),{withTheme:!0}))(re),se=a(795),le=a(789),ce=a(346),ue=a(794),pe=a(806),me=a(790),de=a(792),ge=a(791),fe=a(371),_e=a(383),he=a.n(_e),be=a(205),ye=a.n(be),ve=a(384),Ee=a.n(ve),Se=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={organisation_menu_anchor:null,mobile_menu_anchor:null,route_menu_anchor:null},a.openOrganisationMenu=function(e){a.setState({organisation_menu_anchor:e})},a.closeOrganisationMenu=function(){a.setState({organisation_menu_anchor:null})},a.chooseOrganisation=function(e){a.props.clearSearch(),a.props.setOrganisationFilter(e),a.closeOrganisationMenu()},a.openMobileMenu=function(e){a.setState({mobile_menu_anchor:e})},a.closeMobileMenu=function(){a.setState({mobile_menu_anchor:null})},a.chooseMobile=function(e){a.props.setMobileFilter(e),a.closeMobileMenu()},a.openRouteMenu=function(e){a.setState({route_menu_anchor:e})},a.closeRouteMenu=function(){a.setState({route_menu_anchor:null})},a.chooseRoute=function(e){a.props.setRouteFilter(e),a.closeRouteMenu()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,o=t.organisations,r=t.organisation_lookup,i=t.organisation_filter,s=t.clearOrganisationFilter,l=t.mobiles,c=t.mobile_lookup,u=t.mobile_filter,p=t.clearMobileFilter,m=t.routes,d=t.route_lookup,g=t.route_filter,f=t.clearRouteFilter,_=t.search_type,h=t.postcode,b=t.postcode_district,y=t.distance,v=t.toggleGPS,E=t.postcodeSearch,S=t.clearSearch,k=t.setDistance,O=n.a.createElement("span",{className:a.bullet},"\u2022");return n.a.createElement(le.a,{className:a.grid,container:!0,spacing:3},n.a.createElement(le.a,{item:!0,xs:12,sm:6,md:4,lg:4,xl:2},n.a.createElement(me.a,{className:a.card,elevation:0},n.a.createElement(ge.a,null,n.a.createElement(D.a,{className:a.title,color:"textSecondary",gutterBottom:!0},Math.round(y/1609)+" mile radius",O,"GPS tracking "+("gps"===_?"on":"off")),n.a.createElement(D.a,{variant:"h6",component:"h2",gutterBottom:!0},"Search by location"),n.a.createElement(ne,{postcode:h,distance:y,search_type:_,toggleGPS:v,setDistance:k,postcodeSearch:E,clearSearch:S}),""!==b?n.a.createElement(D.a,{variant:"caption",display:"block"},"Searching around "+b+"."):null))),n.a.createElement(le.a,{item:!0,xs:12,sm:6,md:4,lg:4,xl:2},n.a.createElement(me.a,{className:a.card,elevation:0},n.a.createElement(ge.a,null,n.a.createElement(D.a,{className:a.title,color:"textSecondary",gutterBottom:!0},o.length+" library services",O,l.length+" mobile libraries",O,m.length+" routes"),n.a.createElement(D.a,{variant:"h6",component:"h2"},"Select by service")),n.a.createElement(de.a,null,0===i.length?n.a.createElement(Q.a,{title:"Choose library service"},n.a.createElement(M.a,{size:"small",color:"primary",className:a.button,onClick:function(t){return e.openOrganisationMenu(t.currentTarget)}},n.a.createElement(he.a,{className:a.leftIcon}),"Service")):n.a.createElement(fe.a,{size:"small",color:"secondary",onDelete:s,label:r[i[0]].name}),i.length>0?0===u.length?n.a.createElement(Q.a,{title:"Choose mobile library"},n.a.createElement(M.a,{size:"small",color:"primary",className:a.button,onClick:function(t){return e.openMobileMenu(t.currentTarget)}},n.a.createElement(ye.a,{className:a.leftIcon}),"Mobile")):n.a.createElement(fe.a,{size:"small",color:"secondary",onDelete:function(e){return p()},label:c[u[0]].name}):null,u.length>0?0===g.length?n.a.createElement(Q.a,{title:"Choose route"},n.a.createElement(M.a,{size:"small",color:"primary",className:a.button,onClick:function(t){return e.openRouteMenu(t.currentTarget)}},n.a.createElement(Ee.a,{className:a.leftIcon}),"Route")):n.a.createElement(fe.a,{size:"small",color:"secondary",onDelete:function(e){return f()},label:d[g[0]].name}):null))),n.a.createElement(Z.a,{id:"menu-library-service",anchorEl:this.state.organisation_menu_anchor,keepMounted:!0,open:Boolean(this.state.organisation_menu_anchor),onClose:function(){return e.closeOrganisationMenu()}},o.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(t){return n.a.createElement(H.a,{key:"mnu_itm_org_"+t.id,onClick:function(){return e.chooseOrganisation(t.id)}},t.name)}))),n.a.createElement(Z.a,{id:"menu-mobile-library",anchorEl:this.state.mobile_menu_anchor,keepMounted:!0,open:Boolean(this.state.mobile_menu_anchor),onClose:function(){return e.closeMobileMenu()}},l.filter((function(e){var t=!0;return i.length>0&&-1===i.indexOf(e.organisation_id)&&(t=!1),t})).sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(t){return n.a.createElement(H.a,{key:"mnu_itm_mob_"+t.id,onClick:function(){return e.chooseMobile(t.id)}},t.name)}))),n.a.createElement(Z.a,{id:"menu-route",anchorEl:this.state.route_menu_anchor,keepMounted:!0,open:Boolean(this.state.route_menu_anchor),onClose:function(){return e.closeRouteMenu()}},m.filter((function(e){var t=!0;return u.length>0&&-1===u.indexOf(e.mobile_id)&&(t=!1),t})).sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(t){return n.a.createElement(H.a,{key:"mnu_itm_route_"+t.id,onClick:function(){return e.chooseRoute(t.id)}},t.name)}))))}}]),t}(o.Component),ke=Object(j.a)((function(e){return{bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},card:{position:"relative",minWidth:275,border:"1px solid #F5F5F5"},grid:{marginBottom:10},leftIcon:{marginRight:e.spacing(1)},title:{fontSize:12,fontWeight:500}}}),{withTheme:!0})(Se),Oe=a(793),we=a(206),je=a.n(we),Ce=a(46),xe=a.n(Ce),Fe=a(25),Me=a.n(Fe),Ne=a(141);function Re(e){var t={label:"Not out today"},a={label:"Arriving at "},o={label:"At "},n={label:"Arriving at "},r={label:"Finished for the day"};if(e&&!e.current_stop_id&&!e.previous_stop_id&&e.next_stop_id&&!Me()(e.next_stop_arrival).isSame(Me()(),"day"))return{type:"off_road",text_format:t.label,message:t.label};if(e&&!e.current_stop_id&&!e.previous_stop_id&&e.next_stop_id&&Me()(e.next_stop_arrival).isSame(Me()(),"day")){var i=Me()(e.next_stop_arrival).fromNow();return{type:"pre_route",message:a.label,text_format:a.label+e.next_stop_name+" "+i,args:[{stop_name:e.next_stop_name,stop_id:e.next_stop_id},i]}}if(e&&e.current_stop_id){var s=Me()(e.current_stop_departure).fromNow(!0);return{type:"at_stop",message:o.label,text_format:o.label+e.current_stop_name+" for "+s,args:[{stop_name:e.current_stop_name,stop_id:e.current_stop_id},s]}}if(e&&!e.current_stop_id&&e.previous_stop_id&&e.next_stop_id&&Me()(e.previous_stop_departure).isSame(Me()(),"day")&&Me()(e.next_stop_arrival).isSame(Me()(),"day")){var l=Me()(e.next_stop_arrival).fromNow();return{type:"between_stops",message:n.label,text_format:n.label+e.next_stop_name+" "+l,args:[{stop_name:e.next_stop_name,stop_id:e.next_stop_id},l]}}return e&&e.previous_stop_id&&e.next_stop_id&&Me()(e.previous_stop_departure).isSame(Me()(),"day")&&!Me()(e.next_stop_arrival).isSame(Me()(),"day")?{type:"post_route",message:r.label,text_format:r.label}:null}var Be=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a.stopButton=function(e){return n.a.createElement(M.a,{color:"secondary",onClick:function(){return a.props.viewStop({id:e.stop_id})}},e.stop_name)},a.offRoadMessage=function(e){return n.a.createElement(D.a,null,e.message)},a.preRouteMessage=function(e){var t=a.stopButton(e.args[0]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,null,e.message,t,e.args[1]))},a.atStopMessage=function(e){var t=a.stopButton(e.args[0]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,null,e.message,t," for "+e.args[1]))},a.betweenStopsMessage=function(e){var t=a.stopButton(e.args[0]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,null,e.message,t,e.args[1]))},a.postRouteMessage=function(e){return n.a.createElement(D.a,null,e.message)},a.goToWebsite=function(){return window.open(a.props.mobile.timetable,"_blank")},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,o=t.mobile,r=t.organisation,i=Re(t.location);i&&"off_road"===i.type&&(i=this.offRoadMessage(i)),i&&"pre_route"===i.type&&(i=this.preRouteMessage(i)),i&&"at_stop"===i.type&&(i=this.atStopMessage(i)),i&&"between_stops"===i.type&&(i=this.betweenStopsMessage(i)),i&&"post_route"===i.type&&(i=this.postRouteMessage(i)),i||(i=n.a.createElement(N.a,{className:a.progress,color:"secondary",size:30}));var s=n.a.createElement("span",{className:a.bullet},"\u2022");return n.a.createElement(me.a,{className:a.card,elevation:0},n.a.createElement(ge.a,null,n.a.createElement(D.a,{className:a.title,color:"textSecondary",gutterBottom:!0},o.number_routes+" route"+(o.number_routes>1?"s":""),s,o.number_stops+" stop"+(o.number_stops>1?"s":"")),n.a.createElement(D.a,{variant:"h6",component:"h2"},(r?r.name+" ":"")+o.name),i),n.a.createElement(Oe.a,{variant:"middle"}),n.a.createElement(de.a,null,n.a.createElement(Q.a,{title:"Mobile library stops"},n.a.createElement(M.a,{component:d.b,to:"/stops",size:"small",color:"primary",className:a.button,onClick:function(){return e.props.viewStopsByMobile(r.id,o.id)}},n.a.createElement(I.a,{className:a.leftIcon}),"Stops")),n.a.createElement(Oe.a,{className:a.verticalDivider}),o.timetable?n.a.createElement(Q.a,{title:"Website timetable"},n.a.createElement(b.a,{className:a.button,onClick:function(){return e.goToWebsite()}},n.a.createElement(je.a,null))):null))}}]),t}(o.Component),De=Object(j.a)((function(e){return{bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},card:{minWidth:275,border:"1px solid #F5F5F5"},leftIcon:{marginRight:e.spacing(1)},title:{fontSize:12,fontWeight:500,align:"right"},verticalDivider:{width:1,height:28,margin:8},progress:{margin:e.spacing(2)}}}),{withTheme:!0})(Be),Pe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={on_road:!1,open_tab:0},a.changeTab=function(e){a.setState({open_tab:e})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,o=t.organisations,r=t.organisation_lookup,i=t.organisation_filter,s=t.setOrganisationFilter,l=t.clearOrganisationFilter,c=t.viewStopsByOrganisation,u=t.mobiles,p=t.mobile_lookup,m=t.mobile_location_lookup,d=t.mobiles_nearest_lookup,g=t.mobile_filter,f=t.setMobileFilter,_=t.clearMobileFilter,h=t.routes,b=t.route_lookup,y=t.route_filter,v=t.setRouteFilter,E=t.clearRouteFilter,S=t.search_type,k=t.postcode,O=t.postcode_district,w=t.distance,j=t.toggleGPS,C=t.postcodeSearch,x=t.clearSearch,F=t.setDistance,M=u.filter((function(e){var t=Re(m[e.id]);return t&&"off_road"!==t.type&&"post_route"!==t.type})),N=1===this.state.open_tab?M:u;return n.a.createElement("div",{className:a.root},n.a.createElement(ke,{displayStopLink:!0,organisations:o,organisation_lookup:r,organisation_filter:i,setOrganisationFilter:s,clearOrganisationFilter:l,viewStopsByOrganisation:c,mobiles:u,mobile_lookup:p,mobile_filter:g,setMobileFilter:f,clearMobileFilter:_,routes:h,route_lookup:b,route_filter:y,setRouteFilter:v,clearRouteFilter:E,postcode:k,postcode_district:O,distance:w,search_type:S,setDistance:F,toggleGPS:j,postcodeSearch:C,clearSearch:x}),n.a.createElement(L.a,{disableSticky:!0},"Mobile library dashboard"),n.a.createElement(pe.a,{variant:"standard",scrollButtons:"off",value:this.state.open_tab,indicatorColor:"secondary",textColor:"secondary",onChange:function(t,a){return e.changeTab(a)}},n.a.createElement(ue.a,{label:n.a.createElement(se.a,{className:a.padding,color:"secondary",badgeContent:u.length},"All mobiles")}),n.a.createElement(ue.a,{className:a.tab,label:n.a.createElement(se.a,{className:a.padding,color:"secondary",badgeContent:M.length},"Active")})),n.a.createElement("br",null),u?n.a.createElement(le.a,{container:!0,spacing:3},N.filter((function(e){var t=!0;return i.length>0&&-1===i.indexOf(e.organisation_id)&&(t=!1),g.length>0&&-1===g.indexOf(e.id)&&(t=!1),t})).filter((function(e){return"gps"!==S&&"postcode"!==S||d[e.id]})).map((function(t,a){return n.a.createElement(le.a,{key:"grd_"+t.name.replace(" ","")+"_"+a,item:!0,xs:12,sm:6,md:4,lg:3,xl:2},n.a.createElement(De,{mobile:t,location:m[t.id],organisation:r[t.organisation_id],viewStop:e.props.viewStop,viewStopsByMobile:e.props.viewStopsByMobile}))}))):n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement(ce.a,{color:"secondary"})))}}]),t}(o.Component),Te=Object(j.a)((function(e){return{chip:{margin:e.spacing(1)},padding:{padding:e.spacing(0,2)},root:{flexGrow:1}}}))(Pe),ze=a(93),Ie=a(796),Ge=a(386),Ae=a.n(Ge),We=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(Q.a,{title:"Me"},n.a.createElement(Ie.a,{className:"gps"===this.props.search_type?e.avatarOn:e.avatar},n.a.createElement(Ae.a,null)))}}]),t}(n.a.Component),Le=Object(j.a)((function(e){return{avatar:{margin:0},avatarOn:{margin:0,cursor:"pointer",backgroundColor:e.palette.primary.main}}}),{withTheme:!0})(We),Ze=a(797),He=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=Re(e.location);return n.a.createElement(Q.a,{title:a?a.text_format:""},n.a.createElement(Ze.a,{size:"small",color:"primary",className:t.fab},n.a.createElement(ye.a,null)))}}]),t}(o.Component),Qe=Object(j.a)((function(e){return{fab:{margin:e.spacing(1),boxShadow:"none"}}}),{withTheme:!0})(He),Je=Object(ze.e)({minZoom:5,maxZoom:18,scrollZoom:!0,interactive:!0,dragRotate:!0,attributionControl:!0}),Ue=["https://api.mobilelibraries.org/api/stops/{z}/{x}/{y}.mvt"],qe=["https://api.mobilelibraries.org/api/trips/{z}/{x}/{y}.mvt"],Ye=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={time_update_interval:null,current_time:null},a.componentDidMount=function(){var e=setInterval(a.setCurrentTime,500);a.setState({time_update_interval:e})},a.clickStop=function(e){e&&e.features&&e.features.length>0&&e.features[0].properties&&a.props.viewStop({id:e.features[0].properties.id})},a.clickTrip=function(e){e&&e.features&&e.features.length>0&&e.features[0].properties&&a.props.viewTrip(e.features[0].properties)},a.setCurrentTime=function(){return a.setState({current_time:Me()()})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.position,o=t.zoom,r=t.pitch,i=t.bearing,s=t.fit_bounds,l=t.mobile_locations,c=t.mobile_lookup;return n.a.createElement(Je,{style:"style.json",center:a,zoom:o,maxZoom:17,pitch:r,bearing:i,fitBounds:s,containerStyle:{top:0,bottom:0,right:0,left:0,height:"100vh",width:"100vw",position:"absolute"}},l&&l.length>0?l.map((function(t){var a=[t.geox,t.geoy];if(e.state.current_time&&t.route_section&&t.route_section.coordinates&&t.updated){var o=Me()(e.state.current_time).diff(t.updated),r=Math.round(o/500),i=t.route_section.coordinates;i.length>r&&r>0&&(a=i[r]),i.length<=r&&r>0&&(a=i[i.length-1])}return n.a.createElement(ze.b,{key:"mkr_"+t.id,coordinates:a,anchor:"bottom"},n.a.createElement(Qe,{mobile:c[t.mobile_id],location:t}))})):null,n.a.createElement(ze.c,{id:"src_stops",tileJsonSource:{type:"vector",tiles:Ue}}),n.a.createElement(ze.c,{id:"src_trips",tileJsonSource:{type:"vector",tiles:qe}}),n.a.createElement(ze.a,{id:"lyr_trips_lines",type:"line",sourceId:"src_trips",sourceLayer:"trip",minZoom:13,layout:{"line-join":"round","line-cap":"square"},paint:{"line-color":"#a7a39b","line-offset":["interpolate",["linear"],["zoom"],13,.5,14,1,15,2,16,3,18,10,22,20],"line-opacity":1,"line-width":["interpolate",["linear"],["zoom"],13,.5,14,1,15,2,16,3,18,10,22,20],"line-dasharray":[2,.5]},onClick:this.clickTrip}),n.a.createElement(ze.a,{id:"lyr_stops_circles",type:"circle",sourceId:"src_stops",sourceLayer:"stop",minZoom:7,layout:{},paint:{"circle-radius":["interpolate",["linear"],["zoom"],5,2,17,10],"circle-color":"#607d8b","circle-stroke-width":["interpolate",["linear"],["zoom"],5,1,14,2],"circle-stroke-color":"#FFFFFF","circle-opacity":.8},onClick:this.clickStop}),n.a.createElement(ze.a,{id:"lyr_stops_labels",type:"symbol",sourceId:"src_stops",sourceLayer:"stop",minZoom:13,layout:{"text-ignore-placement":!1,"text-field":["to-string",["get","name"]],"text-font":["Source Sans Pro Bold"],"text-line-height":1,"text-size":["interpolate",["linear"],["zoom"],13,10,17,22],"text-offset":[0,1.7]},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-halo-blur":1,"text-color":"#6a6f73"},onClick:this.clickStop}),this.props.current_position&&this.props.current_position.length>1?n.a.createElement(ze.b,{key:"mk_me",coordinates:[this.props.current_position[0],this.props.current_position[1]]},n.a.createElement(Le,{search_type:this.props.search_type})):null,n.a.createElement(ze.d,{position:"bottom-right"}))}}]),t}(o.Component),$e=a(807),Ke=a(800),Ve=a(799),Xe=a(798),et=a(786),tt=a(755),at=a(347),ot=a(809),nt=a(387),rt=a.n(nt),it=a(388),st=a.n(it),lt=a(141),ct=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={},a.getStopCalendar=function(){return window.open(lt.api+"/stops/"+a.props.stop.id+"/ics")},a.getStopPdf=function(){return window.open(lt.api+"/stops/"+a.props.stop.id+"/pdf","_blank")},a.goToWebsite=function(){return window.open(a.props.stop.timetable,"_blank")},a.close=function(){a.props.close()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,o=t.width,r=t.stop,i=Object(ot.b)("sm",o),s=Me()(r.arrival,"HH:mm:ssZ"),l=Me()(r.departure,"HH:mm:ssZ"),c=Me.a.duration(l.diff(s)).humanize();return n.a.createElement($e.a,{fullScreen:i,disableBackdropClick:!0,open:this.props.open,onClose:this.close,"aria-labelledby":"responsive-dialog-title",BackdropProps:{invisible:!0},PaperProps:{elevation:0,className:a.dialog}},r&&r.route_day?n.a.createElement(n.a.Fragment,null,n.a.createElement(Xe.a,{id:"responsive-dialog-title"},r.name),n.a.createElement(Ve.a,null,n.a.createElement(b.a,{className:a.button,onClick:function(){return e.getStopCalendar()}},n.a.createElement(rt.a,null)),n.a.createElement(b.a,{className:a.button,onClick:function(){return e.getStopPdf()}},n.a.createElement(st.a,null)),n.a.createElement(b.a,{className:a.button,onClick:function(){return e.goToWebsite()}},n.a.createElement(je.a,null)),n.a.createElement(Oe.a,null)),n.a.createElement(Ve.a,null,n.a.createElement(et.a,{className:a.list},n.a.createElement(L.a,null,r.address),n.a.createElement(tt.a,null,n.a.createElement(at.a,{primary:r.route_day+"for "+c})),n.a.createElement(tt.a,null,n.a.createElement(at.a,{primary:s.format("h:mma")+" - "+l.format("h:mma")})),n.a.createElement(tt.a,null,n.a.createElement(at.a,{primary:"Next visiting on "+(r.route_dates&&r.route_dates.length>0?r.route_dates[0]:"")}))))):n.a.createElement(N.a,{className:a.progress,color:"secondary",size:30}),n.a.createElement(Ke.a,null,n.a.createElement(M.a,{onClick:function(){return e.close()},color:"secondary"},"Close")))}}]),t}(n.a.Component),ut=x()(Object(ot.a)(),Object(j.a)((function(e){return{button:{margin:e.spacing(1)},dialog:{border:"1px solid #e5e5e5"},leftIcon:{marginRight:e.spacing(1)},list:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},progress:{margin:e.spacing(2)}}}),{withTheme:!0}))(ct),pt=a(803),mt=a(168),dt=a(389),gt=a.n(dt),ft=a(400),_t=a.n(ft),ht=a(399),bt=a.n(ht),yt=a(398),vt=a.n(yt),Et=a(396),St=a.n(Et),kt=a(395),Ot=a.n(kt),wt=a(397),jt=a.n(wt),Ct=a(141);var xt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"All stops"},a.tableRef=n.a.createRef(),a.setOrganisationFilter=function(e){a.props.setOrganisationFilter(e),a.tableRef.current.onQueryChange()},a.clearOrganisationFilter=function(){a.props.clearOrganisationFilter(),a.tableRef.current.onQueryChange()},a.setMobileFilter=function(e){a.props.setMobileFilter(e),a.tableRef.current.onQueryChange()},a.clearMobileFilter=function(){a.props.clearMobileFilter(),a.tableRef.current.onQueryChange()},a.setRouteFilter=function(e){a.props.setRouteFilter(e),a.tableRef.current.onQueryChange()},a.clearRouteFilter=function(){a.props.clearRouteFilter(),a.tableRef.current.onQueryChange()},a.displayStopInfo=function(e){return a.props.viewStop(e)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.current_position===e.current_position&&this.props.distance===e.distance||this.tableRef.current.onQueryChange()}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,o=t.organisations,r=t.organisation_lookup,i=t.organisation_filter,s=t.viewStopsByOrganisation,l=t.mobiles,c=t.mobile_lookup,u=t.mobile_filter,p=t.routes,m=t.route_lookup,d=t.route_filter,g=t.current_position,f=t.distance,_=t.width,h=t.search_type,b=t.postcode,y=t.postcode_district,v=t.toggleGPS,E=t.postcodeSearch,S=t.clearSearch,k=t.setDistance,O={};Object.keys(r).forEach((function(e){O[e]=r[e].name}));var w={};Object.keys(c).forEach((function(e){w[e]=c[e].name}));var j={};return Object.keys(m).forEach((function(e){j[e]=m[e].name})),n.a.createElement("div",{style:{maxWidth:"100%"}},n.a.createElement(ke,{displayStopLink:!1,organisations:o,organisation_lookup:r,organisation_filter:i,setOrganisationFilter:this.setOrganisationFilter,clearOrganisationFilter:this.clearOrganisationFilter,viewStopsByOrganisation:s,mobiles:l,mobile_lookup:c,mobile_filter:u,setMobileFilter:this.setMobileFilter,clearMobileFilter:this.clearMobileFilter,routes:p,route_lookup:m,route_filter:d,setRouteFilter:this.setRouteFilter,clearRouteFilter:this.clearRouteFilter,postcode:b,postcode_district:y,distance:f,search_type:h,setDistance:k,toggleGPS:v,postcodeSearch:E,clearSearch:S}),n.a.createElement(gt.a,{tableRef:this.tableRef,components:{Container:function(e){return n.a.createElement(mt.a,Object.assign({},e,{elevation:0,className:a.table}))}},icons:{Filter:Ot.a,FirstPage:St.a,LastPage:jt.a,NextPage:vt.a,PreviousPage:bt.a,SortArrow:_t.a},options:{padding:Object(ot.c)("sm",_)?"default":"dense",search:!1,loadingType:"linear",actionsColumnIndex:4,filtering:!1,headerStyle:{backgroundColor:"#2196f3",color:"#ffffff"}},columns:[{title:"Name",field:"name",filtering:!1,render:function(t){return n.a.createElement(n.a.Fragment,null,n.a.createElement(pt.a,{component:"button",variant:"body2",onClick:function(){return e.displayStopInfo(t)}},t.name))}},{title:"Community",field:"community",filtering:!1},{title:"Time",field:"arrival",filtering:!1,render:function(e){return Me()(e.arrival,"HH:mm:ssZ").format("h:mma")}}],data:function(e){return new Promise((function(t,a){!function(e,t,a,o,n,r,i){var s=Ct.api+"/stops?page="+(e.page+1)+"&limit="+e.pageSize;e.orderBy&&e.orderBy.field&&(s=s+"&sort="+e.orderBy.field+"&direction="+e.orderDirection),a.length>0&&(s=s+"&mobile_ids="+a.join("|")),t.length>0&&(s=s+"&organisation_ids="+t.join("|")),o.length>0&&(s=s+"&route_ids="+o.join("|")),n&&n.length>1&&(s=s+"&longitude="+n[0]+"&latitude="+n[1]),r&&""!==r&&(s=s+"&distance="+r),xe.a.get(s).then((function(e){e&&e.data?i({stops:e.data,total:parseInt(e.headers["x-total-count"]),page:parseInt(e.headers["x-page"])}):i({stops:[],total:0,page:1})})).catch((function(e){return i({stops:[],total:0,page:1})}))}(e,i,u,d,g,f,(function(e){t({data:e.stops,page:e.page-1,totalCount:e.total})}))}))},title:this.state.title}))}}]),t}(o.Component),Ft=x()(Object(ot.a)(),Object(j.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:200},margin:{margin:e.spacing(1)},root:{flexGrow:1,maxWidth:"100%"},table:{border:"1px solid #F5F5F5"}}}),{withTheme:!0}))(xt),Mt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={},a.close=function(){a.props.close()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,o=t.width,r=t.trip,i=Object(ot.b)("sm",o),s=Math.round(r.duration/60)+" mins journey time",l=Math.round(r.scheduled_duration/60)+" mins scheduled between stops",c=Math.round(r.distance/1609,1)+" mile(s)";return n.a.createElement($e.a,{fullScreen:i,disableBackdropClick:!0,open:this.props.open,onClose:this.close,"aria-labelledby":"responsive-dialog-title",BackdropProps:{invisible:!0},PaperProps:{elevation:0,className:a.dialog}},n.a.createElement(Xe.a,{id:"responsive-dialog-title"},r.mobile_name+" journey details"),n.a.createElement(Ve.a,null,n.a.createElement(et.a,{className:a.list},n.a.createElement(L.a,null,"Journey from "+r.origin_stop_name+" to "+r.destination_stop_name),n.a.createElement(tt.a,null,n.a.createElement(at.a,{primary:s,secondary:c})),n.a.createElement(tt.a,null,n.a.createElement(at.a,{primary:l})))),n.a.createElement(Ke.a,null,n.a.createElement(M.a,{onClick:function(){return e.close()},color:"secondary"},"Close")))}}]),t}(n.a.Component),Nt=x()(Object(ot.a)(),Object(j.a)((function(e){return{dialog:{border:"1px solid #e5e5e5"},list:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}}),{withTheme:!0}))(Mt);function Rt(e){navigator.geolocation.getCurrentPosition((function(t){e([t.coords.longitude,t.coords.latitude])}),(function(t){e([])}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}var Bt=a(141);var Dt=a(141);var Pt=a(141);function Tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function zt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tt(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var It=Object(O.a)({palette:{primary:E.a,secondary:k.a},overrides:{MuiButton:{text:{textTransform:"none"}},MuiTab:{root:{textTransform:"none"}}}}),Gt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={stop_dialog_open:!1,trip_dialog_open:!1,current_stop:{},current_trip:{},organisations:[],organisation_lookup:{},organisation_filter:[],mobiles:[],mobile_lookup:{},mobile_filter:[],mobile_locations:[],mobile_location_lookup:{},mobiles_nearest:[],mobiles_nearest_lookup:{},mobile_location_timer:null,routes:[],route_lookup:{},route_filter:[],fit_bounds:null,position:[-2.1,53.6138],zoom:[7],pitch:[0],bearing:[0],search_type:"",distance:1609,postcode:"",postcode_district:"",current_position:[],position_update_interval:"",loading_gps:!0,loading_mobiles:!1,loading_organisations:!1,loading_postcode:!0,loading_routes:!1,snackbar_open:!1,snackbar_message:""},a.getOrganisations=function(){var e;a.setState({loading_organisations:!0}),e=function(e){var t={};e.forEach((function(e){return t[e.id]=e})),a.setState({organisations:e,organisation_lookup:t,loading_organisations:!1})},xe.a.get(Bt.api+"/organisations").then((function(t){t&&t.data?e(t.data):e([])})).catch((function(t){return e([])}))},a.getMobiles=function(){var e;a.setState({loading_mobiles:!0}),e=function(e){var t={};e.forEach((function(e){return t[e.id]=e})),a.setState({mobiles:e,mobile_lookup:t,loading_mobiles:!1})},xe.a.get(Ne.api+"/mobiles").then((function(t){t&&t.data?e(t.data):e([])})).catch((function(t){return e([])}))},a.getRoutes=function(){var e;a.setState({loading_routes:!0}),e=function(e){var t={};e.forEach((function(e){return t[e.id]=e})),a.setState({routes:e,route_lookup:t,loading_routes:!1})},xe.a.get(Dt.api+"/routes").then((function(t){t&&t.data?e(t.data):e([])})).catch((function(t){return e([])}))},a.getMobileLocations=function(){var e;e=function(e){var t={};e.forEach((function(e){return t[e.mobile_id]=e})),a.setState({mobile_locations:e,mobile_location_lookup:t})},xe.a.get(Ne.api+"/mobiles/locations").then((function(t){t&&t.data?e(t.data):e([])})).catch((function(t){return e([])}))},a.getMobilesNearest=function(){var e,t,o;e=a.state.current_position,t=a.state.distance,o=function(e){var t={};e.forEach((function(e){return t[e.mobile_id]=e})),a.setState({mobiles_nearest:e,mobiles_nearest_lookup:t})},xe.a.get(Ne.api+"/mobiles/nearest?longitude="+e[0]+"&latitude="+e[1]+"&distance="+t).then((function(e){e&&e.data?o(e.data):o([])})).catch((function(e){return o([])}))},a.componentDidMount=function(){a.getOrganisations(),a.getMobiles(),a.getRoutes(),a.getMobileLocations();var e=setInterval((function(){a.getMobileLocations()}),15e3);a.setState({mobile_location_timer:e})},a.viewStop=function(e){var t,o;a.openStopDialog(e),e.name||(t=e.id,o=function(e){a.setState({current_stop:e})},xe.a.get(Ct.api+"/stops/"+t).then((function(e){e&&e.data?o(e.data):o({})})).catch((function(e){return o({})})))},a.openStopDialog=function(e){return a.setState({current_stop:e,stop_dialog_open:!0})},a.closeStopDialog=function(){return a.setState({stop_dialog_open:!1})},a.viewTrip=function(e){var t,o;a.openTripDialog(e),t=e.id,o=function(e){a.setState({current_trip:e})},xe.a.get(Pt.api+"/trips/"+t).then((function(e){e&&e.data?o(e.data):o({})})).catch((function(e){return o({})}))},a.openTripDialog=function(e){return a.setState({current_trip:e,trip_dialog_open:!0})},a.closeTripDialog=function(){return a.setState({trip_dialog_open:!1})},a.viewStopsByOrganisation=function(e){return a.setState({page:"stops",organisation_filter:[e],mobile_filter:[],route_filter:[]})},a.viewStopsByMobile=function(e,t){return a.setState({page:"stops",organisation_filter:[e],mobile_filter:[t],route_filter:[]})},a.viewStopsByRoute=function(e,t,o){return a.setState({page:"stops",organisation_filter:[e],mobile_filter:[t],route_filter:[o]})},a.clearMobileFilter=function(){return a.setState({mobile_filter:[],route_filter:[]})},a.clearRouteFilter=function(){return a.setState({route_filter:[]})},a.clearOrganisationFilter=function(){return a.setState({organisation_filter:[],mobile_filter:[],route_filter:[]})},a.logPosition=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.setState({loading_gps:!0}),Rt((function(e){2===e.length?(a.getMobilesNearest(),a.setState({current_position:e,position:e,zoom:[11],loading_gps:!1})):(clearInterval(a.state.position_update_interval),a.setState({search_type:"",postcode:"",current_position:[],position_update_interval:null,snackbar_open:!0,snackbar_message:"Could not fetch current location"}))}))},a.setDistance=function(e){return a.setState({distance:e})},a.clearSearch=function(){a.setState({postcode:"",postcode_district:"",current_position:[],search_type:"",organisation_filter:[],mobile_filter:[],route_filter:[]})},a.postcodeSearch=function(e){if(""!==e){var t={search_type:"postcode",loading_postcode:!0,postcode:e,organisation_filter:[],mobile_filter:[],route_filter:[]};"gps"===a.state.search_type&&(clearInterval(a.state.position_update_interval),t.position_update_interval=null),function(e,t){xe.a.get("https://api.postcodes.io/postcodes/"+e).then((function(e){e&&e.data&&e.data.result?t({location:[e.data.result.longitude,e.data.result.latitude],admin_district:e.data.result.admin_district}):t([])})).catch((function(e){return t([])}))}(e,(function(e){e.location&&2===e.location.length?(t.search_type="postcode",t.current_position=e.location,t.position=e.location,t.zoom=[11],t.loading_postcode=!1,t.postcode_district=e.admin_district,a.setState(t),a.getMobilesNearest()):a.setState({snackbar_open:!0,snackbar_message:"Could not find postcode",postcode_district:""})}))}else a.setState({snackbar_open:!0,snackbar_message:"You must enter a postcode",postcode_district:""})},a.toggleGPS=function(){if("gps"===a.state.search_type)clearInterval(a.state.position_update_interval),a.setState({search_type:"",postcode:"",current_position:[],position_update_interval:null});else{var e=setInterval(a.logPosition,1e4);a.setState({position_update_interval:e,search_type:"gps",postcode:""}),a.logPosition(!0)}},a.closeSnackbar=function(e,t){"clickaway"!==t&&a.setState({snackbar_open:!1})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(w.a,{theme:It},n.a.createElement(d.a,null,n.a.createElement("div",{className:t.root},n.a.createElement(h.a,null),n.a.createElement(ie,{loading:this.state.loading_mobiles||this.state.loading_organisations||this.state.loading_routes,postcode:this.state.postcode,distance:this.state.distance,search_type:this.state.search_type,setDistance:this.setDistance,toggleGPS:this.toggleGPS,postcodeSearch:this.postcodeSearch,clearSearch:this.clearSearch}),n.a.createElement("main",{className:t.content},n.a.createElement("div",{className:t.toolbar}),n.a.createElement(g.a,{path:"/",exact:!0,render:function(){return n.a.createElement(Te,{mobiles:e.state.mobiles,mobile_lookup:e.state.mobile_lookup,mobile_location_lookup:e.state.mobile_location_lookup,mobiles_nearest_lookup:e.state.mobiles_nearest_lookup,organisation_lookup:e.state.organisation_lookup,viewStop:e.viewStop,viewStopsByMobile:e.viewStopsByMobile,viewStopsByOrganisation:e.viewStopsByOrganisation,organisations:e.state.organisations,organisation_filter:e.state.organisation_filter,setOrganisationFilter:function(t){e.setState({organisation_filter:[t]})},clearOrganisationFilter:e.clearOrganisationFilter,mobile_filter:e.state.mobile_filter,setMobileFilter:function(t){e.setState({mobile_filter:[t]})},clearMobileFilter:e.clearMobileFilter,routes:e.state.routes,route_lookup:e.state.route_lookup,route_filter:e.state.route_filter,setRouteFilter:function(t){e.setState({route_filter:[t]})},clearRouteFilter:e.clearRouteFilter,postcode:e.state.postcode,postcode_district:e.state.postcode_district,distance:e.state.distance,search_type:e.state.search_type,setDistance:e.setDistance,toggleGPS:e.toggleGPS,postcodeSearch:e.postcodeSearch,clearSearch:e.clearSearch})}}),n.a.createElement(g.a,{path:"/stops",render:function(){return n.a.createElement(Ft,{organisations:e.state.organisations,organisation_lookup:e.state.organisation_lookup,organisation_filter:e.state.organisation_filter,setOrganisationFilter:function(t){e.setState({organisation_filter:[t]})},clearOrganisationFilter:e.clearOrganisationFilter,mobiles:e.state.mobiles,mobile_lookup:e.state.mobile_lookup,mobile_filter:e.state.mobile_filter,setMobileFilter:function(t){e.setState({mobile_filter:[t]})},clearMobileFilter:e.clearMobileFilter,routes:e.state.routes,route_lookup:e.state.route_lookup,route_filter:e.state.route_filter,setRouteFilter:function(t){e.setState({route_filter:[t]})},clearRouteFilter:e.clearRouteFilter,viewStop:e.viewStop,current_position:e.state.current_position,postcode:e.state.postcode,postcode_district:e.state.postcode_district,distance:e.state.distance,search_type:e.state.search_type,setDistance:e.setDistance,toggleGPS:e.toggleGPS,postcodeSearch:e.postcodeSearch,clearSearch:e.clearSearch})}}),n.a.createElement(g.a,{path:"/map",render:function(){return n.a.createElement(Ye,{bearing:e.state.bearing,fit_bounds:e.state.fit_bounds,pitch:e.state.pitch,position:e.state.position,current_position:e.state.current_position,zoom:e.state.zoom,search_type:e.state.search_type,mobile_lookup:e.state.mobile_lookup,mobile_locations:e.state.mobile_locations.filter((function(e){return null!==e.geox})),viewStop:e.viewStop,viewTrip:e.viewTrip})}})),n.a.createElement(ut,{stop:this.state.current_stop,open:this.state.stop_dialog_open,close:function(){return e.closeStopDialog()}}),n.a.createElement(Nt,{trip:this.state.current_trip,open:this.state.trip_dialog_open,close:function(){return e.closeTripDialog()}}),n.a.createElement(y.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.snackbar_open,autoHideDuration:4e3,onClose:this.closeSnackbar,ContentProps:{"aria-describedby":"message-id"},message:n.a.createElement("span",{id:"message-id"},this.state.snackbar_message),action:[n.a.createElement(b.a,{key:"close","aria-label":"close",color:"inherit",className:t.close,onClick:this.closeSnackbar},n.a.createElement(_.a,null))]}))))}}]),t}(o.Component),At=Object(j.a)((function(e){return{root:{display:"flex"},toolbar:zt({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)}}}))(Gt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(At,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[424,1,2]]]);
//# sourceMappingURL=main.80323d5c.chunk.js.map